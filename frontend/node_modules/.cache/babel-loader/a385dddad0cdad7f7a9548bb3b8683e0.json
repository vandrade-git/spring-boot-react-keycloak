{"ast":null,"code":"/*\n * Copyright 2016 Red Hat, Inc. and/or its affiliates\n * and other contributors as indicated by the @author tags.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n(function (root, factory) {\n  if (typeof exports === 'object') {\n    if (typeof module === 'object') {\n      module.exports = factory(require(\"js-sha256\"), require(\"base64-js\"));\n    } else {\n      exports[\"keycloak\"] = factory(require(\"js-sha256\"), require(\"base64-js\"));\n    }\n  } else {\n    /**\n    * [js-sha256]{@link https://github.com/emn178/js-sha256}\n    *\n    * @version 0.9.0\n    * @author Chen, Yi-Cyuan [emn178@gmail.com]\n    * @copyright Chen, Yi-Cyuan 2014-2017\n    * @license MIT\n    */\n    !function () {\n      \"use strict\";\n\n      function t(t, i) {\n        i ? (d[0] = d[16] = d[1] = d[2] = d[3] = d[4] = d[5] = d[6] = d[7] = d[8] = d[9] = d[10] = d[11] = d[12] = d[13] = d[14] = d[15] = 0, this.blocks = d) : this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t ? (this.h0 = 3238371032, this.h1 = 914150663, this.h2 = 812702999, this.h3 = 4144912697, this.h4 = 4290775857, this.h5 = 1750603025, this.h6 = 1694076839, this.h7 = 3204075428) : (this.h0 = 1779033703, this.h1 = 3144134277, this.h2 = 1013904242, this.h3 = 2773480762, this.h4 = 1359893119, this.h5 = 2600822924, this.h6 = 528734635, this.h7 = 1541459225), this.block = this.start = this.bytes = this.hBytes = 0, this.finalized = this.hashed = !1, this.first = !0, this.is224 = t;\n      }\n\n      function i(i, r, s) {\n        var e,\n            n = typeof i;\n\n        if (\"string\" === n) {\n          var o,\n              a = [],\n              u = i.length,\n              c = 0;\n\n          for (e = 0; e < u; ++e) (o = i.charCodeAt(e)) < 128 ? a[c++] = o : o < 2048 ? (a[c++] = 192 | o >> 6, a[c++] = 128 | 63 & o) : o < 55296 || o >= 57344 ? (a[c++] = 224 | o >> 12, a[c++] = 128 | o >> 6 & 63, a[c++] = 128 | 63 & o) : (o = 65536 + ((1023 & o) << 10 | 1023 & i.charCodeAt(++e)), a[c++] = 240 | o >> 18, a[c++] = 128 | o >> 12 & 63, a[c++] = 128 | o >> 6 & 63, a[c++] = 128 | 63 & o);\n\n          i = a;\n        } else {\n          if (\"object\" !== n) throw new Error(h);\n          if (null === i) throw new Error(h);\n          if (f && i.constructor === ArrayBuffer) i = new Uint8Array(i);else if (!(Array.isArray(i) || f && ArrayBuffer.isView(i))) throw new Error(h);\n        }\n\n        i.length > 64 && (i = new t(r, !0).update(i).array());\n        var y = [],\n            p = [];\n\n        for (e = 0; e < 64; ++e) {\n          var l = i[e] || 0;\n          y[e] = 92 ^ l, p[e] = 54 ^ l;\n        }\n\n        t.call(this, r, s), this.update(p), this.oKeyPad = y, this.inner = !0, this.sharedMemory = s;\n      }\n\n      var h = \"input is invalid type\",\n          r = \"object\" == typeof window,\n          s = r ? window : {};\n      s.JS_SHA256_NO_WINDOW && (r = !1);\n      var e = !r && \"object\" == typeof self,\n          n = !s.JS_SHA256_NO_NODE_JS && \"object\" == typeof process && process.versions && process.versions.node;\n      n ? s = global : e && (s = self);\n      var o = !s.JS_SHA256_NO_COMMON_JS && \"object\" == typeof module && module.exports,\n          a = \"function\" == typeof define && define.amd,\n          f = !s.JS_SHA256_NO_ARRAY_BUFFER && \"undefined\" != typeof ArrayBuffer,\n          u = \"0123456789abcdef\".split(\"\"),\n          c = [-2147483648, 8388608, 32768, 128],\n          y = [24, 16, 8, 0],\n          p = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298],\n          l = [\"hex\", \"array\", \"digest\", \"arrayBuffer\"],\n          d = [];\n      !s.JS_SHA256_NO_NODE_JS && Array.isArray || (Array.isArray = function (t) {\n        return \"[object Array]\" === Object.prototype.toString.call(t);\n      }), !f || !s.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW && ArrayBuffer.isView || (ArrayBuffer.isView = function (t) {\n        return \"object\" == typeof t && t.buffer && t.buffer.constructor === ArrayBuffer;\n      });\n\n      var A = function (i, h) {\n        return function (r) {\n          return new t(h, !0).update(r)[i]();\n        };\n      },\n          w = function (i) {\n        var h = A(\"hex\", i);\n        n && (h = b(h, i)), h.create = function () {\n          return new t(i);\n        }, h.update = function (t) {\n          return h.create().update(t);\n        };\n\n        for (var r = 0; r < l.length; ++r) {\n          var s = l[r];\n          h[s] = A(s, i);\n        }\n\n        return h;\n      },\n          b = function (t, i) {\n        var r = eval(\"require('crypto')\"),\n            s = eval(\"require('buffer').Buffer\"),\n            e = i ? \"sha224\" : \"sha256\",\n            n = function (i) {\n          if (\"string\" == typeof i) return r.createHash(e).update(i, \"utf8\").digest(\"hex\");\n          if (null === i || void 0 === i) throw new Error(h);\n          return i.constructor === ArrayBuffer && (i = new Uint8Array(i)), Array.isArray(i) || ArrayBuffer.isView(i) || i.constructor === s ? r.createHash(e).update(new s(i)).digest(\"hex\") : t(i);\n        };\n\n        return n;\n      },\n          v = function (t, h) {\n        return function (r, s) {\n          return new i(r, h, !0).update(s)[t]();\n        };\n      },\n          _ = function (t) {\n        var h = v(\"hex\", t);\n        h.create = function (h) {\n          return new i(h, t);\n        }, h.update = function (t, i) {\n          return h.create(t).update(i);\n        };\n\n        for (var r = 0; r < l.length; ++r) {\n          var s = l[r];\n          h[s] = v(s, t);\n        }\n\n        return h;\n      };\n\n      t.prototype.update = function (t) {\n        if (!this.finalized) {\n          var i,\n              r = typeof t;\n\n          if (\"string\" !== r) {\n            if (\"object\" !== r) throw new Error(h);\n            if (null === t) throw new Error(h);\n            if (f && t.constructor === ArrayBuffer) t = new Uint8Array(t);else if (!(Array.isArray(t) || f && ArrayBuffer.isView(t))) throw new Error(h);\n            i = !0;\n          }\n\n          for (var s, e, n = 0, o = t.length, a = this.blocks; n < o;) {\n            if (this.hashed && (this.hashed = !1, a[0] = this.block, a[16] = a[1] = a[2] = a[3] = a[4] = a[5] = a[6] = a[7] = a[8] = a[9] = a[10] = a[11] = a[12] = a[13] = a[14] = a[15] = 0), i) for (e = this.start; n < o && e < 64; ++n) a[e >> 2] |= t[n] << y[3 & e++];else for (e = this.start; n < o && e < 64; ++n) (s = t.charCodeAt(n)) < 128 ? a[e >> 2] |= s << y[3 & e++] : s < 2048 ? (a[e >> 2] |= (192 | s >> 6) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]) : s < 55296 || s >= 57344 ? (a[e >> 2] |= (224 | s >> 12) << y[3 & e++], a[e >> 2] |= (128 | s >> 6 & 63) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]) : (s = 65536 + ((1023 & s) << 10 | 1023 & t.charCodeAt(++n)), a[e >> 2] |= (240 | s >> 18) << y[3 & e++], a[e >> 2] |= (128 | s >> 12 & 63) << y[3 & e++], a[e >> 2] |= (128 | s >> 6 & 63) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]);\n            this.lastByteIndex = e, this.bytes += e - this.start, e >= 64 ? (this.block = a[16], this.start = e - 64, this.hash(), this.hashed = !0) : this.start = e;\n          }\n\n          return this.bytes > 4294967295 && (this.hBytes += this.bytes / 4294967296 << 0, this.bytes = this.bytes % 4294967296), this;\n        }\n      }, t.prototype.finalize = function () {\n        if (!this.finalized) {\n          this.finalized = !0;\n          var t = this.blocks,\n              i = this.lastByteIndex;\n          t[16] = this.block, t[i >> 2] |= c[3 & i], this.block = t[16], i >= 56 && (this.hashed || this.hash(), t[0] = this.block, t[16] = t[1] = t[2] = t[3] = t[4] = t[5] = t[6] = t[7] = t[8] = t[9] = t[10] = t[11] = t[12] = t[13] = t[14] = t[15] = 0), t[14] = this.hBytes << 3 | this.bytes >>> 29, t[15] = this.bytes << 3, this.hash();\n        }\n      }, t.prototype.hash = function () {\n        var t,\n            i,\n            h,\n            r,\n            s,\n            e,\n            n,\n            o,\n            a,\n            f = this.h0,\n            u = this.h1,\n            c = this.h2,\n            y = this.h3,\n            l = this.h4,\n            d = this.h5,\n            A = this.h6,\n            w = this.h7,\n            b = this.blocks;\n\n        for (t = 16; t < 64; ++t) i = ((s = b[t - 15]) >>> 7 | s << 25) ^ (s >>> 18 | s << 14) ^ s >>> 3, h = ((s = b[t - 2]) >>> 17 | s << 15) ^ (s >>> 19 | s << 13) ^ s >>> 10, b[t] = b[t - 16] + i + b[t - 7] + h << 0;\n\n        for (a = u & c, t = 0; t < 64; t += 4) this.first ? (this.is224 ? (e = 300032, w = (s = b[0] - 1413257819) - 150054599 << 0, y = s + 24177077 << 0) : (e = 704751109, w = (s = b[0] - 210244248) - 1521486534 << 0, y = s + 143694565 << 0), this.first = !1) : (i = (f >>> 2 | f << 30) ^ (f >>> 13 | f << 19) ^ (f >>> 22 | f << 10), r = (e = f & u) ^ f & c ^ a, w = y + (s = w + (h = (l >>> 6 | l << 26) ^ (l >>> 11 | l << 21) ^ (l >>> 25 | l << 7)) + (l & d ^ ~l & A) + p[t] + b[t]) << 0, y = s + (i + r) << 0), i = (y >>> 2 | y << 30) ^ (y >>> 13 | y << 19) ^ (y >>> 22 | y << 10), r = (n = y & f) ^ y & u ^ e, A = c + (s = A + (h = (w >>> 6 | w << 26) ^ (w >>> 11 | w << 21) ^ (w >>> 25 | w << 7)) + (w & l ^ ~w & d) + p[t + 1] + b[t + 1]) << 0, i = ((c = s + (i + r) << 0) >>> 2 | c << 30) ^ (c >>> 13 | c << 19) ^ (c >>> 22 | c << 10), r = (o = c & y) ^ c & f ^ n, d = u + (s = d + (h = (A >>> 6 | A << 26) ^ (A >>> 11 | A << 21) ^ (A >>> 25 | A << 7)) + (A & w ^ ~A & l) + p[t + 2] + b[t + 2]) << 0, i = ((u = s + (i + r) << 0) >>> 2 | u << 30) ^ (u >>> 13 | u << 19) ^ (u >>> 22 | u << 10), r = (a = u & c) ^ u & y ^ o, l = f + (s = l + (h = (d >>> 6 | d << 26) ^ (d >>> 11 | d << 21) ^ (d >>> 25 | d << 7)) + (d & A ^ ~d & w) + p[t + 3] + b[t + 3]) << 0, f = s + (i + r) << 0;\n\n        this.h0 = this.h0 + f << 0, this.h1 = this.h1 + u << 0, this.h2 = this.h2 + c << 0, this.h3 = this.h3 + y << 0, this.h4 = this.h4 + l << 0, this.h5 = this.h5 + d << 0, this.h6 = this.h6 + A << 0, this.h7 = this.h7 + w << 0;\n      }, t.prototype.hex = function () {\n        this.finalize();\n        var t = this.h0,\n            i = this.h1,\n            h = this.h2,\n            r = this.h3,\n            s = this.h4,\n            e = this.h5,\n            n = this.h6,\n            o = this.h7,\n            a = u[t >> 28 & 15] + u[t >> 24 & 15] + u[t >> 20 & 15] + u[t >> 16 & 15] + u[t >> 12 & 15] + u[t >> 8 & 15] + u[t >> 4 & 15] + u[15 & t] + u[i >> 28 & 15] + u[i >> 24 & 15] + u[i >> 20 & 15] + u[i >> 16 & 15] + u[i >> 12 & 15] + u[i >> 8 & 15] + u[i >> 4 & 15] + u[15 & i] + u[h >> 28 & 15] + u[h >> 24 & 15] + u[h >> 20 & 15] + u[h >> 16 & 15] + u[h >> 12 & 15] + u[h >> 8 & 15] + u[h >> 4 & 15] + u[15 & h] + u[r >> 28 & 15] + u[r >> 24 & 15] + u[r >> 20 & 15] + u[r >> 16 & 15] + u[r >> 12 & 15] + u[r >> 8 & 15] + u[r >> 4 & 15] + u[15 & r] + u[s >> 28 & 15] + u[s >> 24 & 15] + u[s >> 20 & 15] + u[s >> 16 & 15] + u[s >> 12 & 15] + u[s >> 8 & 15] + u[s >> 4 & 15] + u[15 & s] + u[e >> 28 & 15] + u[e >> 24 & 15] + u[e >> 20 & 15] + u[e >> 16 & 15] + u[e >> 12 & 15] + u[e >> 8 & 15] + u[e >> 4 & 15] + u[15 & e] + u[n >> 28 & 15] + u[n >> 24 & 15] + u[n >> 20 & 15] + u[n >> 16 & 15] + u[n >> 12 & 15] + u[n >> 8 & 15] + u[n >> 4 & 15] + u[15 & n];\n        return this.is224 || (a += u[o >> 28 & 15] + u[o >> 24 & 15] + u[o >> 20 & 15] + u[o >> 16 & 15] + u[o >> 12 & 15] + u[o >> 8 & 15] + u[o >> 4 & 15] + u[15 & o]), a;\n      }, t.prototype.toString = t.prototype.hex, t.prototype.digest = function () {\n        this.finalize();\n        var t = this.h0,\n            i = this.h1,\n            h = this.h2,\n            r = this.h3,\n            s = this.h4,\n            e = this.h5,\n            n = this.h6,\n            o = this.h7,\n            a = [t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, i >> 24 & 255, i >> 16 & 255, i >> 8 & 255, 255 & i, h >> 24 & 255, h >> 16 & 255, h >> 8 & 255, 255 & h, r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, 255 & r, s >> 24 & 255, s >> 16 & 255, s >> 8 & 255, 255 & s, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, n >> 24 & 255, n >> 16 & 255, n >> 8 & 255, 255 & n];\n        return this.is224 || a.push(o >> 24 & 255, o >> 16 & 255, o >> 8 & 255, 255 & o), a;\n      }, t.prototype.array = t.prototype.digest, t.prototype.arrayBuffer = function () {\n        this.finalize();\n        var t = new ArrayBuffer(this.is224 ? 28 : 32),\n            i = new DataView(t);\n        return i.setUint32(0, this.h0), i.setUint32(4, this.h1), i.setUint32(8, this.h2), i.setUint32(12, this.h3), i.setUint32(16, this.h4), i.setUint32(20, this.h5), i.setUint32(24, this.h6), this.is224 || i.setUint32(28, this.h7), t;\n      }, i.prototype = new t(), i.prototype.finalize = function () {\n        if (t.prototype.finalize.call(this), this.inner) {\n          this.inner = !1;\n          var i = this.array();\n          t.call(this, this.is224, this.sharedMemory), this.update(this.oKeyPad), this.update(i), t.prototype.finalize.call(this);\n        }\n      };\n      var B = w();\n      B.sha256 = B, B.sha224 = w(!0), B.sha256.hmac = _(), B.sha224.hmac = _(!0), o ? module.exports = B : (s.sha256 = B.sha256, s.sha224 = B.sha224, a && define(function () {\n        return B;\n      }));\n    }();\n    /**\n     * [base64-js]{@link https://github.com/beatgammit/base64-js}\n     *\n     * @version v1.3.0 \n     * @author Kirill, Fomichev\n     * @copyright Kirill, Fomichev 2014\n     * @license MIT\n     */\n\n    (function (r) {\n      if (typeof exports === \"object\" && typeof module !== \"undefined\") {\n        module.exports = r();\n      } else if (typeof define === \"function\" && define.amd) {\n        define([], r);\n      } else {\n        var e;\n\n        if (typeof window !== \"undefined\") {\n          e = window;\n        } else if (typeof global !== \"undefined\") {\n          e = global;\n        } else if (typeof self !== \"undefined\") {\n          e = self;\n        } else {\n          e = this;\n        }\n\n        e.base64js = r();\n      }\n    })(function () {\n      var r, e, n;\n      return function () {\n        function r(e, n, t) {\n          function o(f, i) {\n            if (!n[f]) {\n              if (!e[f]) {\n                var u = \"function\" == typeof require && require;\n                if (!i && u) return u(f, !0);\n                if (a) return a(f, !0);\n                var v = new Error(\"Cannot find module '\" + f + \"'\");\n                throw v.code = \"MODULE_NOT_FOUND\", v;\n              }\n\n              var d = n[f] = {\n                exports: {}\n              };\n              e[f][0].call(d.exports, function (r) {\n                var n = e[f][1][r];\n                return o(n || r);\n              }, d, d.exports, r, e, n, t);\n            }\n\n            return n[f].exports;\n          }\n\n          for (var a = \"function\" == typeof require && require, f = 0; f < t.length; f++) o(t[f]);\n\n          return o;\n        }\n\n        return r;\n      }()({\n        \"/\": [function (r, e, n) {\n          \"use strict\";\n\n          n.byteLength = d;\n          n.toByteArray = h;\n          n.fromByteArray = p;\n          var t = [];\n          var o = [];\n          var a = typeof Uint8Array !== \"undefined\" ? Uint8Array : Array;\n          var f = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n          for (var i = 0, u = f.length; i < u; ++i) {\n            t[i] = f[i];\n            o[f.charCodeAt(i)] = i;\n          }\n\n          o[\"-\".charCodeAt(0)] = 62;\n          o[\"_\".charCodeAt(0)] = 63;\n\n          function v(r) {\n            var e = r.length;\n\n            if (e % 4 > 0) {\n              throw new Error(\"Invalid string. Length must be a multiple of 4\");\n            }\n\n            var n = r.indexOf(\"=\");\n            if (n === -1) n = e;\n            var t = n === e ? 0 : 4 - n % 4;\n            return [n, t];\n          }\n\n          function d(r) {\n            var e = v(r);\n            var n = e[0];\n            var t = e[1];\n            return (n + t) * 3 / 4 - t;\n          }\n\n          function c(r, e, n) {\n            return (e + n) * 3 / 4 - n;\n          }\n\n          function h(r) {\n            var e;\n            var n = v(r);\n            var t = n[0];\n            var f = n[1];\n            var i = new a(c(r, t, f));\n            var u = 0;\n            var d = f > 0 ? t - 4 : t;\n\n            for (var h = 0; h < d; h += 4) {\n              e = o[r.charCodeAt(h)] << 18 | o[r.charCodeAt(h + 1)] << 12 | o[r.charCodeAt(h + 2)] << 6 | o[r.charCodeAt(h + 3)];\n              i[u++] = e >> 16 & 255;\n              i[u++] = e >> 8 & 255;\n              i[u++] = e & 255;\n            }\n\n            if (f === 2) {\n              e = o[r.charCodeAt(h)] << 2 | o[r.charCodeAt(h + 1)] >> 4;\n              i[u++] = e & 255;\n            }\n\n            if (f === 1) {\n              e = o[r.charCodeAt(h)] << 10 | o[r.charCodeAt(h + 1)] << 4 | o[r.charCodeAt(h + 2)] >> 2;\n              i[u++] = e >> 8 & 255;\n              i[u++] = e & 255;\n            }\n\n            return i;\n          }\n\n          function s(r) {\n            return t[r >> 18 & 63] + t[r >> 12 & 63] + t[r >> 6 & 63] + t[r & 63];\n          }\n\n          function l(r, e, n) {\n            var t;\n            var o = [];\n\n            for (var a = e; a < n; a += 3) {\n              t = (r[a] << 16 & 16711680) + (r[a + 1] << 8 & 65280) + (r[a + 2] & 255);\n              o.push(s(t));\n            }\n\n            return o.join(\"\");\n          }\n\n          function p(r) {\n            var e;\n            var n = r.length;\n            var o = n % 3;\n            var a = [];\n            var f = 16383;\n\n            for (var i = 0, u = n - o; i < u; i += f) {\n              a.push(l(r, i, i + f > u ? u : i + f));\n            }\n\n            if (o === 1) {\n              e = r[n - 1];\n              a.push(t[e >> 2] + t[e << 4 & 63] + \"==\");\n            } else if (o === 2) {\n              e = (r[n - 2] << 8) + r[n - 1];\n              a.push(t[e >> 10] + t[e >> 4 & 63] + t[e << 2 & 63] + \"=\");\n            }\n\n            return a.join(\"\");\n          }\n        }, {}]\n      }, {}, [])(\"/\");\n    });\n\n    var Keycloak = factory(root[\"sha256\"], root[\"base64js\"]);\n    root[\"Keycloak\"] = Keycloak;\n\n    if (typeof define === \"function\" && define.amd) {\n      define(\"keycloak\", [], function () {\n        return Keycloak;\n      });\n    }\n  }\n})(window, function (sha256_imported, base64js_imported) {\n  function Keycloak(config) {\n    if (!(this instanceof Keycloak)) {\n      return new Keycloak(config);\n    }\n\n    var kc = this;\n    var adapter;\n    var refreshQueue = [];\n    var callbackStorage;\n    var loginIframe = {\n      enable: true,\n      callbackList: [],\n      interval: 5\n    };\n    var scripts = document.getElementsByTagName('script');\n\n    for (var i = 0; i < scripts.length; i++) {\n      if ((scripts[i].src.indexOf('keycloak.js') !== -1 || scripts[i].src.indexOf('keycloak.min.js') !== -1) && scripts[i].src.indexOf('version=') !== -1) {\n        kc.iframeVersion = scripts[i].src.substring(scripts[i].src.indexOf('version=') + 8).split('&')[0];\n      }\n    }\n\n    var useNonce = true;\n    var logInfo = createLogger(console.info);\n    var logWarn = createLogger(console.warn);\n\n    kc.init = function (initOptions) {\n      kc.authenticated = false;\n      callbackStorage = createCallbackStorage();\n      var adapters = ['default', 'cordova', 'cordova-native'];\n\n      if (initOptions && adapters.indexOf(initOptions.adapter) > -1) {\n        adapter = loadAdapter(initOptions.adapter);\n      } else if (initOptions && typeof initOptions.adapter === \"object\") {\n        adapter = initOptions.adapter;\n      } else {\n        if (window.Cordova || window.cordova) {\n          adapter = loadAdapter('cordova');\n        } else {\n          adapter = loadAdapter();\n        }\n      }\n\n      if (initOptions) {\n        if (typeof initOptions.useNonce !== 'undefined') {\n          useNonce = initOptions.useNonce;\n        }\n\n        if (typeof initOptions.checkLoginIframe !== 'undefined') {\n          loginIframe.enable = initOptions.checkLoginIframe;\n        }\n\n        if (initOptions.checkLoginIframeInterval) {\n          loginIframe.interval = initOptions.checkLoginIframeInterval;\n        }\n\n        if (initOptions.promiseType === 'native') {\n          kc.useNativePromise = true;\n        } else {\n          console.warn('[KEYCLOAK] Using legacy promises is deprecated and will be removed in future versions. You can opt in to using native promises by setting `promiseType` to \\'native\\' when initializing Keycloak.');\n          kc.useNativePromise = false;\n        }\n\n        if (initOptions.onLoad === 'login-required') {\n          kc.loginRequired = true;\n        }\n\n        if (initOptions.responseMode) {\n          if (initOptions.responseMode === 'query' || initOptions.responseMode === 'fragment') {\n            kc.responseMode = initOptions.responseMode;\n          } else {\n            throw 'Invalid value for responseMode';\n          }\n        }\n\n        if (initOptions.flow) {\n          switch (initOptions.flow) {\n            case 'standard':\n              kc.responseType = 'code';\n              break;\n\n            case 'implicit':\n              kc.responseType = 'id_token token';\n              break;\n\n            case 'hybrid':\n              kc.responseType = 'code id_token token';\n              break;\n\n            default:\n              throw 'Invalid value for flow';\n          }\n\n          kc.flow = initOptions.flow;\n        }\n\n        if (initOptions.timeSkew != null) {\n          kc.timeSkew = initOptions.timeSkew;\n        }\n\n        if (initOptions.redirectUri) {\n          kc.redirectUri = initOptions.redirectUri;\n        }\n\n        if (initOptions.silentCheckSsoRedirectUri) {\n          kc.silentCheckSsoRedirectUri = initOptions.silentCheckSsoRedirectUri;\n        }\n\n        if (initOptions.pkceMethod) {\n          if (initOptions.pkceMethod !== \"S256\") {\n            throw 'Invalid value for pkceMethod';\n          }\n\n          kc.pkceMethod = initOptions.pkceMethod;\n        }\n\n        if (typeof initOptions.enableLogging === 'boolean') {\n          kc.enableLogging = initOptions.enableLogging;\n        } else {\n          kc.enableLogging = false;\n        }\n      }\n\n      if (!kc.responseMode) {\n        kc.responseMode = 'fragment';\n      }\n\n      if (!kc.responseType) {\n        kc.responseType = 'code';\n        kc.flow = 'standard';\n      }\n\n      var promise = createPromise(false);\n      var initPromise = createPromise(true);\n      initPromise.promise.success(function () {\n        kc.onReady && kc.onReady(kc.authenticated);\n        promise.setSuccess(kc.authenticated);\n      }).error(function (errorData) {\n        promise.setError(errorData);\n      });\n      var configPromise = loadConfig(config);\n\n      function onLoad() {\n        var doLogin = function (prompt) {\n          if (!prompt) {\n            options.prompt = 'none';\n          }\n\n          if (kc.useNativePromise) {\n            kc.login(options).then(function () {\n              initPromise.setSuccess();\n            }).catch(function () {\n              initPromise.setError();\n            });\n          } else {\n            kc.login(options).success(function () {\n              initPromise.setSuccess();\n            }).error(function () {\n              initPromise.setError();\n            });\n          }\n        };\n\n        var checkSsoSilently = function () {\n          var ifrm = document.createElement(\"iframe\");\n          var src = kc.createLoginUrl({\n            prompt: 'none',\n            redirectUri: kc.silentCheckSsoRedirectUri\n          });\n          ifrm.setAttribute(\"src\", src);\n          ifrm.setAttribute(\"title\", \"keycloak-silent-check-sso\");\n          ifrm.style.display = \"none\";\n          document.body.appendChild(ifrm);\n\n          var messageCallback = function (event) {\n            if (event.origin !== window.location.origin || ifrm.contentWindow !== event.source) {\n              return;\n            }\n\n            var oauth = parseCallback(event.data);\n            processCallback(oauth, initPromise);\n            document.body.removeChild(ifrm);\n            window.removeEventListener(\"message\", messageCallback);\n          };\n\n          window.addEventListener(\"message\", messageCallback);\n        };\n\n        var options = {};\n\n        switch (initOptions.onLoad) {\n          case 'check-sso':\n            if (loginIframe.enable) {\n              setupCheckLoginIframe().success(function () {\n                checkLoginIframe().success(function (unchanged) {\n                  if (!unchanged) {\n                    kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                  } else {\n                    initPromise.setSuccess();\n                  }\n                }).error(function () {\n                  initPromise.setError();\n                });\n              });\n            } else {\n              kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n            }\n\n            break;\n\n          case 'login-required':\n            doLogin(true);\n            break;\n\n          default:\n            throw 'Invalid value for onLoad';\n        }\n      }\n\n      function processInit() {\n        var callback = parseCallback(window.location.href);\n\n        if (callback) {\n          window.history.replaceState(window.history.state, null, callback.newUrl);\n        }\n\n        if (callback && callback.valid) {\n          return setupCheckLoginIframe().success(function () {\n            processCallback(callback, initPromise);\n          }).error(function (e) {\n            initPromise.setError();\n          });\n        } else if (initOptions) {\n          if (initOptions.token && initOptions.refreshToken) {\n            setToken(initOptions.token, initOptions.refreshToken, initOptions.idToken);\n\n            if (loginIframe.enable) {\n              setupCheckLoginIframe().success(function () {\n                checkLoginIframe().success(function (unchanged) {\n                  if (unchanged) {\n                    kc.onAuthSuccess && kc.onAuthSuccess();\n                    initPromise.setSuccess();\n                    scheduleCheckIframe();\n                  } else {\n                    initPromise.setSuccess();\n                  }\n                }).error(function () {\n                  initPromise.setError();\n                });\n              });\n            } else {\n              kc.updateToken(-1).success(function () {\n                kc.onAuthSuccess && kc.onAuthSuccess();\n                initPromise.setSuccess();\n              }).error(function () {\n                kc.onAuthError && kc.onAuthError();\n\n                if (initOptions.onLoad) {\n                  onLoad();\n                } else {\n                  initPromise.setError();\n                }\n              });\n            }\n          } else if (initOptions.onLoad) {\n            onLoad();\n          } else {\n            initPromise.setSuccess();\n          }\n        } else {\n          initPromise.setSuccess();\n        }\n      }\n\n      configPromise.success(processInit);\n      configPromise.error(function () {\n        promise.setError();\n      });\n      return promise.promise;\n    };\n\n    kc.login = function (options) {\n      return adapter.login(options);\n    };\n\n    function generateRandomData(len) {\n      // use web crypto APIs if possible\n      var array = null;\n      var crypto = window.crypto || window.msCrypto;\n\n      if (crypto && crypto.getRandomValues && window.Uint8Array) {\n        array = new Uint8Array(len);\n        crypto.getRandomValues(array);\n        return array;\n      } // fallback to Math random\n\n\n      array = new Array(len);\n\n      for (var j = 0; j < array.length; j++) {\n        array[j] = Math.floor(256 * Math.random());\n      }\n\n      return array;\n    }\n\n    function generateCodeVerifier(len) {\n      return generateRandomString(len, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789');\n    }\n\n    function generateRandomString(len, alphabet) {\n      var randomData = generateRandomData(len);\n      var chars = new Array(len);\n\n      for (var i = 0; i < len; i++) {\n        chars[i] = alphabet.charCodeAt(randomData[i] % alphabet.length);\n      }\n\n      return String.fromCharCode.apply(null, chars);\n    }\n\n    function generatePkceChallenge(pkceMethod, codeVerifier) {\n      switch (pkceMethod) {\n        // The use of the \"plain\" method is considered insecure and therefore not supported.\n        case \"S256\":\n          // hash codeVerifier, then encode as url-safe base64 without padding\n          var hashBytes = new Uint8Array(sha256_imported.arrayBuffer(codeVerifier));\n          var encodedHash = base64js_imported.fromByteArray(hashBytes).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/\\=/g, '');\n          return encodedHash;\n\n        default:\n          throw 'Invalid value for pkceMethod';\n      }\n    }\n\n    kc.createLoginUrl = function (options) {\n      var state = createUUID();\n      var nonce = createUUID();\n      var redirectUri = adapter.redirectUri(options);\n      var callbackState = {\n        state: state,\n        nonce: nonce,\n        redirectUri: encodeURIComponent(redirectUri)\n      };\n\n      if (options && options.prompt) {\n        callbackState.prompt = options.prompt;\n      }\n\n      var baseUrl;\n\n      if (options && options.action == 'register') {\n        baseUrl = kc.endpoints.register();\n      } else {\n        baseUrl = kc.endpoints.authorize();\n      }\n\n      var scope;\n\n      if (options && options.scope) {\n        if (options.scope.indexOf(\"openid\") != -1) {\n          scope = options.scope;\n        } else {\n          scope = \"openid \" + options.scope;\n        }\n      } else {\n        scope = \"openid\";\n      }\n\n      var url = baseUrl + '?client_id=' + encodeURIComponent(kc.clientId) + '&redirect_uri=' + encodeURIComponent(redirectUri) + '&state=' + encodeURIComponent(state) + '&response_mode=' + encodeURIComponent(kc.responseMode) + '&response_type=' + encodeURIComponent(kc.responseType) + '&scope=' + encodeURIComponent(scope);\n\n      if (useNonce) {\n        url = url + '&nonce=' + encodeURIComponent(nonce);\n      }\n\n      if (options && options.prompt) {\n        url += '&prompt=' + encodeURIComponent(options.prompt);\n      }\n\n      if (options && options.maxAge) {\n        url += '&max_age=' + encodeURIComponent(options.maxAge);\n      }\n\n      if (options && options.loginHint) {\n        url += '&login_hint=' + encodeURIComponent(options.loginHint);\n      }\n\n      if (options && options.idpHint) {\n        url += '&kc_idp_hint=' + encodeURIComponent(options.idpHint);\n      }\n\n      if (options && options.locale) {\n        url += '&ui_locales=' + encodeURIComponent(options.locale);\n      }\n\n      if (options && options.kcLocale) {\n        url += '&kc_locale=' + encodeURIComponent(options.kcLocale);\n      }\n\n      if (kc.pkceMethod) {\n        var codeVerifier = generateCodeVerifier(96);\n        callbackState.pkceCodeVerifier = codeVerifier;\n        var pkceChallenge = generatePkceChallenge(kc.pkceMethod, codeVerifier);\n        url += '&code_challenge=' + pkceChallenge;\n        url += '&code_challenge_method=' + kc.pkceMethod;\n      }\n\n      callbackStorage.add(callbackState);\n      return url;\n    };\n\n    kc.logout = function (options) {\n      return adapter.logout(options);\n    };\n\n    kc.createLogoutUrl = function (options) {\n      var url = kc.endpoints.logout() + '?redirect_uri=' + encodeURIComponent(adapter.redirectUri(options, false));\n      return url;\n    };\n\n    kc.register = function (options) {\n      return adapter.register(options);\n    };\n\n    kc.createRegisterUrl = function (options) {\n      if (!options) {\n        options = {};\n      }\n\n      options.action = 'register';\n      return kc.createLoginUrl(options);\n    };\n\n    kc.createAccountUrl = function (options) {\n      var realm = getRealmUrl();\n      var url = undefined;\n\n      if (typeof realm !== 'undefined') {\n        url = realm + '/account' + '?referrer=' + encodeURIComponent(kc.clientId) + '&referrer_uri=' + encodeURIComponent(adapter.redirectUri(options));\n      }\n\n      return url;\n    };\n\n    kc.accountManagement = function () {\n      return adapter.accountManagement();\n    };\n\n    kc.hasRealmRole = function (role) {\n      var access = kc.realmAccess;\n      return !!access && access.roles.indexOf(role) >= 0;\n    };\n\n    kc.hasResourceRole = function (role, resource) {\n      if (!kc.resourceAccess) {\n        return false;\n      }\n\n      var access = kc.resourceAccess[resource || kc.clientId];\n      return !!access && access.roles.indexOf(role) >= 0;\n    };\n\n    kc.loadUserProfile = function () {\n      var url = getRealmUrl() + '/account';\n      var req = new XMLHttpRequest();\n      req.open('GET', url, true);\n      req.setRequestHeader('Accept', 'application/json');\n      req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n      var promise = createPromise(false);\n\n      req.onreadystatechange = function () {\n        if (req.readyState == 4) {\n          if (req.status == 200) {\n            kc.profile = JSON.parse(req.responseText);\n            promise.setSuccess(kc.profile);\n          } else {\n            promise.setError();\n          }\n        }\n      };\n\n      req.send();\n      return promise.promise;\n    };\n\n    kc.loadUserInfo = function () {\n      var url = kc.endpoints.userinfo();\n      var req = new XMLHttpRequest();\n      req.open('GET', url, true);\n      req.setRequestHeader('Accept', 'application/json');\n      req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n      var promise = createPromise(false);\n\n      req.onreadystatechange = function () {\n        if (req.readyState == 4) {\n          if (req.status == 200) {\n            kc.userInfo = JSON.parse(req.responseText);\n            promise.setSuccess(kc.userInfo);\n          } else {\n            promise.setError();\n          }\n        }\n      };\n\n      req.send();\n      return promise.promise;\n    };\n\n    kc.isTokenExpired = function (minValidity) {\n      if (!kc.tokenParsed || !kc.refreshToken && kc.flow != 'implicit') {\n        throw 'Not authenticated';\n      }\n\n      if (kc.timeSkew == null) {\n        logInfo('[KEYCLOAK] Unable to determine if token is expired as timeskew is not set');\n        return true;\n      }\n\n      var expiresIn = kc.tokenParsed['exp'] - Math.ceil(new Date().getTime() / 1000) + kc.timeSkew;\n\n      if (minValidity) {\n        if (isNaN(minValidity)) {\n          throw 'Invalid minValidity';\n        }\n\n        expiresIn -= minValidity;\n      }\n\n      return expiresIn < 0;\n    };\n\n    kc.updateToken = function (minValidity) {\n      var promise = createPromise(false);\n\n      if (!kc.refreshToken) {\n        promise.setError();\n        return promise.promise;\n      }\n\n      minValidity = minValidity || 5;\n\n      var exec = function () {\n        var refreshToken = false;\n\n        if (minValidity == -1) {\n          refreshToken = true;\n          logInfo('[KEYCLOAK] Refreshing token: forced refresh');\n        } else if (!kc.tokenParsed || kc.isTokenExpired(minValidity)) {\n          refreshToken = true;\n          logInfo('[KEYCLOAK] Refreshing token: token expired');\n        }\n\n        if (!refreshToken) {\n          promise.setSuccess(false);\n        } else {\n          var params = 'grant_type=refresh_token&' + 'refresh_token=' + kc.refreshToken;\n          var url = kc.endpoints.token();\n          refreshQueue.push(promise);\n\n          if (refreshQueue.length == 1) {\n            var req = new XMLHttpRequest();\n            req.open('POST', url, true);\n            req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n            req.withCredentials = true;\n            params += '&client_id=' + encodeURIComponent(kc.clientId);\n            var timeLocal = new Date().getTime();\n\n            req.onreadystatechange = function () {\n              if (req.readyState == 4) {\n                if (req.status == 200) {\n                  logInfo('[KEYCLOAK] Token refreshed');\n                  timeLocal = (timeLocal + new Date().getTime()) / 2;\n                  var tokenResponse = JSON.parse(req.responseText);\n                  setToken(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], timeLocal);\n                  kc.onAuthRefreshSuccess && kc.onAuthRefreshSuccess();\n\n                  for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                    p.setSuccess(true);\n                  }\n                } else {\n                  logWarn('[KEYCLOAK] Failed to refresh token');\n\n                  if (req.status == 400) {\n                    kc.clearToken();\n                  }\n\n                  kc.onAuthRefreshError && kc.onAuthRefreshError();\n\n                  for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                    p.setError(true);\n                  }\n                }\n              }\n            };\n\n            req.send(params);\n          }\n        }\n      };\n\n      if (loginIframe.enable) {\n        var iframePromise = checkLoginIframe();\n        iframePromise.success(function () {\n          exec();\n        }).error(function () {\n          promise.setError();\n        });\n      } else {\n        exec();\n      }\n\n      return promise.promise;\n    };\n\n    kc.clearToken = function () {\n      if (kc.token) {\n        setToken(null, null, null);\n        kc.onAuthLogout && kc.onAuthLogout();\n\n        if (kc.loginRequired) {\n          kc.login();\n        }\n      }\n    };\n\n    function getRealmUrl() {\n      if (typeof kc.authServerUrl !== 'undefined') {\n        if (kc.authServerUrl.charAt(kc.authServerUrl.length - 1) == '/') {\n          return kc.authServerUrl + 'realms/' + encodeURIComponent(kc.realm);\n        } else {\n          return kc.authServerUrl + '/realms/' + encodeURIComponent(kc.realm);\n        }\n      } else {\n        return undefined;\n      }\n    }\n\n    function getOrigin() {\n      if (!window.location.origin) {\n        return window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n      } else {\n        return window.location.origin;\n      }\n    }\n\n    function processCallback(oauth, promise) {\n      var code = oauth.code;\n      var error = oauth.error;\n      var prompt = oauth.prompt;\n      var timeLocal = new Date().getTime();\n\n      if (error) {\n        if (prompt != 'none') {\n          var errorData = {\n            error: error,\n            error_description: oauth.error_description\n          };\n          kc.onAuthError && kc.onAuthError(errorData);\n          promise && promise.setError(errorData);\n        } else {\n          promise && promise.setSuccess();\n        }\n\n        return;\n      } else if (kc.flow != 'standard' && (oauth.access_token || oauth.id_token)) {\n        authSuccess(oauth.access_token, null, oauth.id_token, true);\n      }\n\n      if (kc.flow != 'implicit' && code) {\n        var params = 'code=' + code + '&grant_type=authorization_code';\n        var url = kc.endpoints.token();\n        var req = new XMLHttpRequest();\n        req.open('POST', url, true);\n        req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n        params += '&client_id=' + encodeURIComponent(kc.clientId);\n        params += '&redirect_uri=' + oauth.redirectUri;\n\n        if (oauth.pkceCodeVerifier) {\n          params += '&code_verifier=' + oauth.pkceCodeVerifier;\n        }\n\n        req.withCredentials = true;\n\n        req.onreadystatechange = function () {\n          if (req.readyState == 4) {\n            if (req.status == 200) {\n              var tokenResponse = JSON.parse(req.responseText);\n              authSuccess(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], kc.flow === 'standard');\n              scheduleCheckIframe();\n            } else {\n              kc.onAuthError && kc.onAuthError();\n              promise && promise.setError();\n            }\n          }\n        };\n\n        req.send(params);\n      }\n\n      function authSuccess(accessToken, refreshToken, idToken, fulfillPromise) {\n        timeLocal = (timeLocal + new Date().getTime()) / 2;\n        setToken(accessToken, refreshToken, idToken, timeLocal);\n\n        if (useNonce && (kc.tokenParsed && kc.tokenParsed.nonce != oauth.storedNonce || kc.refreshTokenParsed && kc.refreshTokenParsed.nonce != oauth.storedNonce || kc.idTokenParsed && kc.idTokenParsed.nonce != oauth.storedNonce)) {\n          logInfo('[KEYCLOAK] Invalid nonce, clearing token');\n          kc.clearToken();\n          promise && promise.setError();\n        } else {\n          if (fulfillPromise) {\n            kc.onAuthSuccess && kc.onAuthSuccess();\n            promise && promise.setSuccess();\n          }\n        }\n      }\n    }\n\n    function loadConfig(url) {\n      var promise = createPromise(true);\n      var configUrl;\n\n      if (!config) {\n        configUrl = 'keycloak.json';\n      } else if (typeof config === 'string') {\n        configUrl = config;\n      }\n\n      function setupOidcEndoints(oidcConfiguration) {\n        if (!oidcConfiguration) {\n          kc.endpoints = {\n            authorize: function () {\n              return getRealmUrl() + '/protocol/openid-connect/auth';\n            },\n            token: function () {\n              return getRealmUrl() + '/protocol/openid-connect/token';\n            },\n            logout: function () {\n              return getRealmUrl() + '/protocol/openid-connect/logout';\n            },\n            checkSessionIframe: function () {\n              var src = getRealmUrl() + '/protocol/openid-connect/login-status-iframe.html';\n\n              if (kc.iframeVersion) {\n                src = src + '?version=' + kc.iframeVersion;\n              }\n\n              return src;\n            },\n            register: function () {\n              return getRealmUrl() + '/protocol/openid-connect/registrations';\n            },\n            userinfo: function () {\n              return getRealmUrl() + '/protocol/openid-connect/userinfo';\n            }\n          };\n        } else {\n          kc.endpoints = {\n            authorize: function () {\n              return oidcConfiguration.authorization_endpoint;\n            },\n            token: function () {\n              return oidcConfiguration.token_endpoint;\n            },\n            logout: function () {\n              if (!oidcConfiguration.end_session_endpoint) {\n                throw \"Not supported by the OIDC server\";\n              }\n\n              return oidcConfiguration.end_session_endpoint;\n            },\n            checkSessionIframe: function () {\n              if (!oidcConfiguration.check_session_iframe) {\n                throw \"Not supported by the OIDC server\";\n              }\n\n              return oidcConfiguration.check_session_iframe;\n            },\n            register: function () {\n              throw 'Redirection to \"Register user\" page not supported in standard OIDC mode';\n            },\n            userinfo: function () {\n              if (!oidcConfiguration.userinfo_endpoint) {\n                throw \"Not supported by the OIDC server\";\n              }\n\n              return oidcConfiguration.userinfo_endpoint;\n            }\n          };\n        }\n      }\n\n      if (configUrl) {\n        var req = new XMLHttpRequest();\n        req.open('GET', configUrl, true);\n        req.setRequestHeader('Accept', 'application/json');\n\n        req.onreadystatechange = function () {\n          if (req.readyState == 4) {\n            if (req.status == 200 || fileLoaded(req)) {\n              var config = JSON.parse(req.responseText);\n              kc.authServerUrl = config['auth-server-url'];\n              kc.realm = config['realm'];\n              kc.clientId = config['resource'];\n              setupOidcEndoints(null);\n              promise.setSuccess();\n            } else {\n              promise.setError();\n            }\n          }\n        };\n\n        req.send();\n      } else {\n        if (!config.clientId) {\n          throw 'clientId missing';\n        }\n\n        kc.clientId = config.clientId;\n        var oidcProvider = config['oidcProvider'];\n\n        if (!oidcProvider) {\n          if (!config['url']) {\n            var scripts = document.getElementsByTagName('script');\n\n            for (var i = 0; i < scripts.length; i++) {\n              if (scripts[i].src.match(/.*keycloak\\.js/)) {\n                config.url = scripts[i].src.substr(0, scripts[i].src.indexOf('/js/keycloak.js'));\n                break;\n              }\n            }\n          }\n\n          if (!config.realm) {\n            throw 'realm missing';\n          }\n\n          kc.authServerUrl = config.url;\n          kc.realm = config.realm;\n          setupOidcEndoints(null);\n          promise.setSuccess();\n        } else {\n          if (typeof oidcProvider === 'string') {\n            var oidcProviderConfigUrl;\n\n            if (oidcProvider.charAt(oidcProvider.length - 1) == '/') {\n              oidcProviderConfigUrl = oidcProvider + '.well-known/openid-configuration';\n            } else {\n              oidcProviderConfigUrl = oidcProvider + '/.well-known/openid-configuration';\n            }\n\n            var req = new XMLHttpRequest();\n            req.open('GET', oidcProviderConfigUrl, true);\n            req.setRequestHeader('Accept', 'application/json');\n\n            req.onreadystatechange = function () {\n              if (req.readyState == 4) {\n                if (req.status == 200 || fileLoaded(req)) {\n                  var oidcProviderConfig = JSON.parse(req.responseText);\n                  setupOidcEndoints(oidcProviderConfig);\n                  promise.setSuccess();\n                } else {\n                  promise.setError();\n                }\n              }\n            };\n\n            req.send();\n          } else {\n            setupOidcEndoints(oidcProvider);\n            promise.setSuccess();\n          }\n        }\n      }\n\n      return promise.promise;\n    }\n\n    function fileLoaded(xhr) {\n      return xhr.status == 0 && xhr.responseText && xhr.responseURL.startsWith('file:');\n    }\n\n    function setToken(token, refreshToken, idToken, timeLocal) {\n      if (kc.tokenTimeoutHandle) {\n        clearTimeout(kc.tokenTimeoutHandle);\n        kc.tokenTimeoutHandle = null;\n      }\n\n      if (refreshToken) {\n        kc.refreshToken = refreshToken;\n        kc.refreshTokenParsed = decodeToken(refreshToken);\n      } else {\n        delete kc.refreshToken;\n        delete kc.refreshTokenParsed;\n      }\n\n      if (idToken) {\n        kc.idToken = idToken;\n        kc.idTokenParsed = decodeToken(idToken);\n      } else {\n        delete kc.idToken;\n        delete kc.idTokenParsed;\n      }\n\n      if (token) {\n        kc.token = token;\n        kc.tokenParsed = decodeToken(token);\n        kc.sessionId = kc.tokenParsed.session_state;\n        kc.authenticated = true;\n        kc.subject = kc.tokenParsed.sub;\n        kc.realmAccess = kc.tokenParsed.realm_access;\n        kc.resourceAccess = kc.tokenParsed.resource_access;\n\n        if (timeLocal) {\n          kc.timeSkew = Math.floor(timeLocal / 1000) - kc.tokenParsed.iat;\n        }\n\n        if (kc.timeSkew != null) {\n          logInfo('[KEYCLOAK] Estimated time difference between browser and server is ' + kc.timeSkew + ' seconds');\n\n          if (kc.onTokenExpired) {\n            var expiresIn = (kc.tokenParsed['exp'] - new Date().getTime() / 1000 + kc.timeSkew) * 1000;\n            logInfo('[KEYCLOAK] Token expires in ' + Math.round(expiresIn / 1000) + ' s');\n\n            if (expiresIn <= 0) {\n              kc.onTokenExpired();\n            } else {\n              kc.tokenTimeoutHandle = setTimeout(kc.onTokenExpired, expiresIn);\n            }\n          }\n        }\n      } else {\n        delete kc.token;\n        delete kc.tokenParsed;\n        delete kc.subject;\n        delete kc.realmAccess;\n        delete kc.resourceAccess;\n        kc.authenticated = false;\n      }\n    }\n\n    function decodeToken(str) {\n      str = str.split('.')[1];\n      str = str.replace('/-/g', '+');\n      str = str.replace('/_/g', '/');\n\n      switch (str.length % 4) {\n        case 0:\n          break;\n\n        case 2:\n          str += '==';\n          break;\n\n        case 3:\n          str += '=';\n          break;\n\n        default:\n          throw 'Invalid token';\n      }\n\n      str = (str + '===').slice(0, str.length + str.length % 4);\n      str = str.replace(/-/g, '+').replace(/_/g, '/');\n      str = decodeURIComponent(escape(atob(str)));\n      str = JSON.parse(str);\n      return str;\n    }\n\n    function createUUID() {\n      var hexDigits = '0123456789abcdef';\n      var s = generateRandomString(36, hexDigits).split(\"\");\n      s[14] = '4';\n      s[19] = hexDigits.substr(s[19] & 0x3 | 0x8, 1);\n      s[8] = s[13] = s[18] = s[23] = '-';\n      var uuid = s.join('');\n      return uuid;\n    }\n\n    function parseCallback(url) {\n      var oauth = parseCallbackUrl(url);\n\n      if (!oauth) {\n        return;\n      }\n\n      var oauthState = callbackStorage.get(oauth.state);\n\n      if (oauthState) {\n        oauth.valid = true;\n        oauth.redirectUri = oauthState.redirectUri;\n        oauth.storedNonce = oauthState.nonce;\n        oauth.prompt = oauthState.prompt;\n        oauth.pkceCodeVerifier = oauthState.pkceCodeVerifier;\n      }\n\n      return oauth;\n    }\n\n    function parseCallbackUrl(url) {\n      var supportedParams;\n\n      switch (kc.flow) {\n        case 'standard':\n          supportedParams = ['code', 'state', 'session_state'];\n          break;\n\n        case 'implicit':\n          supportedParams = ['access_token', 'token_type', 'id_token', 'state', 'session_state', 'expires_in'];\n          break;\n\n        case 'hybrid':\n          supportedParams = ['access_token', 'id_token', 'code', 'state', 'session_state'];\n          break;\n      }\n\n      supportedParams.push('error');\n      supportedParams.push('error_description');\n      supportedParams.push('error_uri');\n      var queryIndex = url.indexOf('?');\n      var fragmentIndex = url.indexOf('#');\n      var newUrl;\n      var parsed;\n\n      if (kc.responseMode === 'query' && queryIndex !== -1) {\n        newUrl = url.substring(0, queryIndex);\n        parsed = parseCallbackParams(url.substring(queryIndex + 1, fragmentIndex !== -1 ? fragmentIndex : url.length), supportedParams);\n\n        if (parsed.paramsString !== '') {\n          newUrl += '?' + parsed.paramsString;\n        }\n\n        if (fragmentIndex !== -1) {\n          newUrl += url.substring(fragmentIndex);\n        }\n      } else if (kc.responseMode === 'fragment' && fragmentIndex !== -1) {\n        newUrl = url.substring(0, fragmentIndex);\n        parsed = parseCallbackParams(url.substring(fragmentIndex + 1), supportedParams);\n\n        if (parsed.paramsString !== '') {\n          newUrl += '#' + parsed.paramsString;\n        }\n      }\n\n      if (parsed && parsed.oauthParams) {\n        if (kc.flow === 'standard' || kc.flow === 'hybrid') {\n          if ((parsed.oauthParams.code || parsed.oauthParams.error) && parsed.oauthParams.state) {\n            parsed.oauthParams.newUrl = newUrl;\n            return parsed.oauthParams;\n          }\n        } else if (kc.flow === 'implicit') {\n          if ((parsed.oauthParams.access_token || parsed.oauthParams.error) && parsed.oauthParams.state) {\n            parsed.oauthParams.newUrl = newUrl;\n            return parsed.oauthParams;\n          }\n        }\n      }\n    }\n\n    function parseCallbackParams(paramsString, supportedParams) {\n      var p = paramsString.split('&');\n      var result = {\n        paramsString: '',\n        oauthParams: {}\n      };\n\n      for (var i = 0; i < p.length; i++) {\n        var t = p[i].split('=');\n\n        if (supportedParams.indexOf(t[0]) !== -1) {\n          result.oauthParams[t[0]] = t[1];\n        } else {\n          if (result.paramsString !== '') {\n            result.paramsString += '&';\n          }\n\n          result.paramsString += p[i];\n        }\n      }\n\n      return result;\n    }\n\n    function createPromise(internal) {\n      if (!internal && kc.useNativePromise) {\n        return createNativePromise();\n      } else {\n        return createLegacyPromise();\n      }\n    }\n\n    function createNativePromise() {\n      // Need to create a native Promise which also preserves the\n      // interface of the custom promise type previously used by the API\n      var p = {\n        setSuccess: function (result) {\n          p.resolve(result);\n        },\n        setError: function (result) {\n          p.reject(result);\n        }\n      };\n      p.promise = new Promise(function (resolve, reject) {\n        p.resolve = resolve;\n        p.reject = reject;\n      });\n      return p;\n    }\n\n    function createLegacyPromise() {\n      var p = {\n        setSuccess: function (result) {\n          p.success = true;\n          p.result = result;\n\n          if (p.successCallback) {\n            p.successCallback(result);\n          }\n        },\n        setError: function (result) {\n          p.error = true;\n          p.result = result;\n\n          if (p.errorCallback) {\n            p.errorCallback(result);\n          }\n        },\n        promise: {\n          success: function (callback) {\n            if (p.success) {\n              callback(p.result);\n            } else if (!p.error) {\n              p.successCallback = callback;\n            }\n\n            return p.promise;\n          },\n          error: function (callback) {\n            if (p.error) {\n              callback(p.result);\n            } else if (!p.success) {\n              p.errorCallback = callback;\n            }\n\n            return p.promise;\n          }\n        }\n      };\n      return p;\n    }\n\n    function setupCheckLoginIframe() {\n      var promise = createPromise(true);\n\n      if (!loginIframe.enable) {\n        promise.setSuccess();\n        return promise.promise;\n      }\n\n      if (loginIframe.iframe) {\n        promise.setSuccess();\n        return promise.promise;\n      }\n\n      var iframe = document.createElement('iframe');\n      loginIframe.iframe = iframe;\n\n      iframe.onload = function () {\n        var authUrl = kc.endpoints.authorize();\n\n        if (authUrl.charAt(0) === '/') {\n          loginIframe.iframeOrigin = getOrigin();\n        } else {\n          loginIframe.iframeOrigin = authUrl.substring(0, authUrl.indexOf('/', 8));\n        }\n\n        promise.setSuccess();\n      };\n\n      var src = kc.endpoints.checkSessionIframe();\n      iframe.setAttribute('src', src);\n      iframe.setAttribute('title', 'keycloak-session-iframe');\n      iframe.style.display = 'none';\n      document.body.appendChild(iframe);\n\n      var messageCallback = function (event) {\n        if (event.origin !== loginIframe.iframeOrigin || loginIframe.iframe.contentWindow !== event.source) {\n          return;\n        }\n\n        if (!(event.data == 'unchanged' || event.data == 'changed' || event.data == 'error')) {\n          return;\n        }\n\n        if (event.data != 'unchanged') {\n          kc.clearToken();\n        }\n\n        var callbacks = loginIframe.callbackList.splice(0, loginIframe.callbackList.length);\n\n        for (var i = callbacks.length - 1; i >= 0; --i) {\n          var promise = callbacks[i];\n\n          if (event.data == 'error') {\n            promise.setError();\n          } else {\n            promise.setSuccess(event.data == 'unchanged');\n          }\n        }\n      };\n\n      window.addEventListener('message', messageCallback, false);\n      return promise.promise;\n    }\n\n    function scheduleCheckIframe() {\n      if (loginIframe.enable) {\n        if (kc.token) {\n          setTimeout(function () {\n            checkLoginIframe().success(function (unchanged) {\n              if (unchanged) {\n                scheduleCheckIframe();\n              }\n            });\n          }, loginIframe.interval * 1000);\n        }\n      }\n    }\n\n    function checkLoginIframe() {\n      var promise = createPromise(true);\n\n      if (loginIframe.iframe && loginIframe.iframeOrigin) {\n        var msg = kc.clientId + ' ' + (kc.sessionId ? kc.sessionId : '');\n        loginIframe.callbackList.push(promise);\n        var origin = loginIframe.iframeOrigin;\n\n        if (loginIframe.callbackList.length == 1) {\n          loginIframe.iframe.contentWindow.postMessage(msg, origin);\n        }\n      } else {\n        promise.setSuccess();\n      }\n\n      return promise.promise;\n    }\n\n    function loadAdapter(type) {\n      if (!type || type == 'default') {\n        return {\n          login: function (options) {\n            window.location.replace(kc.createLoginUrl(options));\n            return createPromise(false).promise;\n          },\n          logout: function (options) {\n            window.location.replace(kc.createLogoutUrl(options));\n            return createPromise(false).promise;\n          },\n          register: function (options) {\n            window.location.replace(kc.createRegisterUrl(options));\n            return createPromise(false).promise;\n          },\n          accountManagement: function () {\n            var accountUrl = kc.createAccountUrl();\n\n            if (typeof accountUrl !== 'undefined') {\n              window.location.href = accountUrl;\n            } else {\n              throw \"Not supported by the OIDC server\";\n            }\n\n            return createPromise(false).promise;\n          },\n          redirectUri: function (options, encodeHash) {\n            if (arguments.length == 1) {\n              encodeHash = true;\n            }\n\n            if (options && options.redirectUri) {\n              return options.redirectUri;\n            } else if (kc.redirectUri) {\n              return kc.redirectUri;\n            } else {\n              return location.href;\n            }\n          }\n        };\n      }\n\n      if (type == 'cordova') {\n        loginIframe.enable = false;\n\n        var cordovaOpenWindowWrapper = function (loginUrl, target, options) {\n          if (window.cordova && window.cordova.InAppBrowser) {\n            // Use inappbrowser for IOS and Android if available\n            return window.cordova.InAppBrowser.open(loginUrl, target, options);\n          } else {\n            return window.open(loginUrl, target, options);\n          }\n        };\n\n        var shallowCloneCordovaOptions = function (userOptions) {\n          if (userOptions && userOptions.cordovaOptions) {\n            return Object.keys(userOptions.cordovaOptions).reduce(function (options, optionName) {\n              options[optionName] = userOptions.cordovaOptions[optionName];\n              return options;\n            }, {});\n          } else {\n            return {};\n          }\n        };\n\n        var formatCordovaOptions = function (cordovaOptions) {\n          return Object.keys(cordovaOptions).reduce(function (options, optionName) {\n            options.push(optionName + \"=\" + cordovaOptions[optionName]);\n            return options;\n          }, []).join(\",\");\n        };\n\n        var createCordovaOptions = function (userOptions) {\n          var cordovaOptions = shallowCloneCordovaOptions(userOptions);\n          cordovaOptions.location = 'no';\n\n          if (userOptions && userOptions.prompt == 'none') {\n            cordovaOptions.hidden = 'yes';\n          }\n\n          return formatCordovaOptions(cordovaOptions);\n        };\n\n        return {\n          login: function (options) {\n            var promise = createPromise(false);\n            var cordovaOptions = createCordovaOptions(options);\n            var loginUrl = kc.createLoginUrl(options);\n            var ref = cordovaOpenWindowWrapper(loginUrl, '_blank', cordovaOptions);\n            var completed = false;\n            var closed = false;\n\n            var closeBrowser = function () {\n              closed = true;\n              ref.close();\n            };\n\n            ref.addEventListener('loadstart', function (event) {\n              if (event.url.indexOf('http://localhost') == 0) {\n                var callback = parseCallback(event.url);\n                processCallback(callback, promise);\n                closeBrowser();\n                completed = true;\n              }\n            });\n            ref.addEventListener('loaderror', function (event) {\n              if (!completed) {\n                if (event.url.indexOf('http://localhost') == 0) {\n                  var callback = parseCallback(event.url);\n                  processCallback(callback, promise);\n                  closeBrowser();\n                  completed = true;\n                } else {\n                  promise.setError();\n                  closeBrowser();\n                }\n              }\n            });\n            ref.addEventListener('exit', function (event) {\n              if (!closed) {\n                promise.setError({\n                  reason: \"closed_by_user\"\n                });\n              }\n            });\n            return promise.promise;\n          },\n          logout: function (options) {\n            var promise = createPromise(false);\n            var logoutUrl = kc.createLogoutUrl(options);\n            var ref = cordovaOpenWindowWrapper(logoutUrl, '_blank', 'location=no,hidden=yes');\n            var error;\n            ref.addEventListener('loadstart', function (event) {\n              if (event.url.indexOf('http://localhost') == 0) {\n                ref.close();\n              }\n            });\n            ref.addEventListener('loaderror', function (event) {\n              if (event.url.indexOf('http://localhost') == 0) {\n                ref.close();\n              } else {\n                error = true;\n                ref.close();\n              }\n            });\n            ref.addEventListener('exit', function (event) {\n              if (error) {\n                promise.setError();\n              } else {\n                kc.clearToken();\n                promise.setSuccess();\n              }\n            });\n            return promise.promise;\n          },\n          register: function (options) {\n            var promise = createPromise(false);\n            var registerUrl = kc.createRegisterUrl();\n            var cordovaOptions = createCordovaOptions(options);\n            var ref = cordovaOpenWindowWrapper(registerUrl, '_blank', cordovaOptions);\n            ref.addEventListener('loadstart', function (event) {\n              if (event.url.indexOf('http://localhost') == 0) {\n                ref.close();\n                var oauth = parseCallback(event.url);\n                processCallback(oauth, promise);\n              }\n            });\n            return promise.promise;\n          },\n          accountManagement: function () {\n            var accountUrl = kc.createAccountUrl();\n\n            if (typeof accountUrl !== 'undefined') {\n              var ref = cordovaOpenWindowWrapper(accountUrl, '_blank', 'location=no');\n              ref.addEventListener('loadstart', function (event) {\n                if (event.url.indexOf('http://localhost') == 0) {\n                  ref.close();\n                }\n              });\n            } else {\n              throw \"Not supported by the OIDC server\";\n            }\n          },\n          redirectUri: function (options) {\n            return 'http://localhost';\n          }\n        };\n      }\n\n      if (type == 'cordova-native') {\n        loginIframe.enable = false;\n        return {\n          login: function (options) {\n            var promise = createPromise(false);\n            var loginUrl = kc.createLoginUrl(options);\n            universalLinks.subscribe('keycloak', function (event) {\n              universalLinks.unsubscribe('keycloak');\n              window.cordova.plugins.browsertab.close();\n              var oauth = parseCallback(event.url);\n              processCallback(oauth, promise);\n            });\n            window.cordova.plugins.browsertab.openUrl(loginUrl);\n            return promise.promise;\n          },\n          logout: function (options) {\n            var promise = createPromise(false);\n            var logoutUrl = kc.createLogoutUrl(options);\n            universalLinks.subscribe('keycloak', function (event) {\n              universalLinks.unsubscribe('keycloak');\n              window.cordova.plugins.browsertab.close();\n              kc.clearToken();\n              promise.setSuccess();\n            });\n            window.cordova.plugins.browsertab.openUrl(logoutUrl);\n            return promise.promise;\n          },\n          register: function (options) {\n            var promise = createPromise(false);\n            var registerUrl = kc.createRegisterUrl(options);\n            universalLinks.subscribe('keycloak', function (event) {\n              universalLinks.unsubscribe('keycloak');\n              window.cordova.plugins.browsertab.close();\n              var oauth = parseCallback(event.url);\n              processCallback(oauth, promise);\n            });\n            window.cordova.plugins.browsertab.openUrl(registerUrl);\n            return promise.promise;\n          },\n          accountManagement: function () {\n            var accountUrl = kc.createAccountUrl();\n\n            if (typeof accountUrl !== 'undefined') {\n              window.cordova.plugins.browsertab.openUrl(accountUrl);\n            } else {\n              throw \"Not supported by the OIDC server\";\n            }\n          },\n          redirectUri: function (options) {\n            if (options && options.redirectUri) {\n              return options.redirectUri;\n            } else if (kc.redirectUri) {\n              return kc.redirectUri;\n            } else {\n              return \"http://localhost\";\n            }\n          }\n        };\n      }\n\n      throw 'invalid adapter type: ' + type;\n    }\n\n    var LocalStorage = function () {\n      if (!(this instanceof LocalStorage)) {\n        return new LocalStorage();\n      }\n\n      localStorage.setItem('kc-test', 'test');\n      localStorage.removeItem('kc-test');\n      var cs = this;\n\n      function clearExpired() {\n        var time = new Date().getTime();\n\n        for (var i = 0; i < localStorage.length; i++) {\n          var key = localStorage.key(i);\n\n          if (key && key.indexOf('kc-callback-') == 0) {\n            var value = localStorage.getItem(key);\n\n            if (value) {\n              try {\n                var expires = JSON.parse(value).expires;\n\n                if (!expires || expires < time) {\n                  localStorage.removeItem(key);\n                }\n              } catch (err) {\n                localStorage.removeItem(key);\n              }\n            }\n          }\n        }\n      }\n\n      cs.get = function (state) {\n        if (!state) {\n          return;\n        }\n\n        var key = 'kc-callback-' + state;\n        var value = localStorage.getItem(key);\n\n        if (value) {\n          localStorage.removeItem(key);\n          value = JSON.parse(value);\n        }\n\n        clearExpired();\n        return value;\n      };\n\n      cs.add = function (state) {\n        clearExpired();\n        var key = 'kc-callback-' + state.state;\n        state.expires = new Date().getTime() + 60 * 60 * 1000;\n        localStorage.setItem(key, JSON.stringify(state));\n      };\n    };\n\n    var CookieStorage = function () {\n      if (!(this instanceof CookieStorage)) {\n        return new CookieStorage();\n      }\n\n      var cs = this;\n\n      cs.get = function (state) {\n        if (!state) {\n          return;\n        }\n\n        var value = getCookie('kc-callback-' + state);\n        setCookie('kc-callback-' + state, '', cookieExpiration(-100));\n\n        if (value) {\n          return JSON.parse(value);\n        }\n      };\n\n      cs.add = function (state) {\n        setCookie('kc-callback-' + state.state, JSON.stringify(state), cookieExpiration(60));\n      };\n\n      cs.removeItem = function (key) {\n        setCookie(key, '', cookieExpiration(-100));\n      };\n\n      var cookieExpiration = function (minutes) {\n        var exp = new Date();\n        exp.setTime(exp.getTime() + minutes * 60 * 1000);\n        return exp;\n      };\n\n      var getCookie = function (key) {\n        var name = key + '=';\n        var ca = document.cookie.split(';');\n\n        for (var i = 0; i < ca.length; i++) {\n          var c = ca[i];\n\n          while (c.charAt(0) == ' ') {\n            c = c.substring(1);\n          }\n\n          if (c.indexOf(name) == 0) {\n            return c.substring(name.length, c.length);\n          }\n        }\n\n        return '';\n      };\n\n      var setCookie = function (key, value, expirationDate) {\n        var cookie = key + '=' + value + '; ' + 'expires=' + expirationDate.toUTCString() + '; ';\n        document.cookie = cookie;\n      };\n    };\n\n    function createCallbackStorage() {\n      try {\n        return new LocalStorage();\n      } catch (err) {}\n\n      return new CookieStorage();\n    }\n\n    function createLogger(fn) {\n      return function () {\n        if (kc.enableLogging) {\n          fn.apply(console, Array.prototype.slice.call(arguments));\n        }\n      };\n    }\n  }\n\n  return Keycloak;\n});","map":{"version":3,"sources":["/home/vandrade/Documents/Projects/Personal/keycloak-experiment/frontend/node_modules/keycloak-js/dist/keycloak.js"],"names":["root","factory","exports","module","require","t","i","d","blocks","h0","h1","h2","h3","h4","h5","h6","h7","block","start","bytes","hBytes","finalized","hashed","first","is224","r","s","e","n","o","a","u","length","c","charCodeAt","Error","h","f","constructor","ArrayBuffer","Uint8Array","Array","isArray","isView","update","array","y","p","l","call","oKeyPad","inner","sharedMemory","window","JS_SHA256_NO_WINDOW","self","JS_SHA256_NO_NODE_JS","process","versions","node","global","JS_SHA256_NO_COMMON_JS","define","amd","JS_SHA256_NO_ARRAY_BUFFER","split","Object","prototype","toString","JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW","buffer","A","w","b","create","eval","createHash","digest","v","_","lastByteIndex","hash","finalize","hex","push","arrayBuffer","DataView","setUint32","B","sha256","sha224","hmac","base64js","code","byteLength","toByteArray","fromByteArray","indexOf","join","Keycloak","sha256_imported","base64js_imported","config","kc","adapter","refreshQueue","callbackStorage","loginIframe","enable","callbackList","interval","scripts","document","getElementsByTagName","src","iframeVersion","substring","useNonce","logInfo","createLogger","console","info","logWarn","warn","init","initOptions","authenticated","createCallbackStorage","adapters","loadAdapter","Cordova","cordova","checkLoginIframe","checkLoginIframeInterval","promiseType","useNativePromise","onLoad","loginRequired","responseMode","flow","responseType","timeSkew","redirectUri","silentCheckSsoRedirectUri","pkceMethod","enableLogging","promise","createPromise","initPromise","success","onReady","setSuccess","error","errorData","setError","configPromise","loadConfig","doLogin","prompt","options","login","then","catch","checkSsoSilently","ifrm","createElement","createLoginUrl","setAttribute","style","display","body","appendChild","messageCallback","event","origin","location","contentWindow","source","oauth","parseCallback","data","processCallback","removeChild","removeEventListener","addEventListener","setupCheckLoginIframe","unchanged","processInit","callback","href","history","replaceState","state","newUrl","valid","token","refreshToken","setToken","idToken","onAuthSuccess","scheduleCheckIframe","updateToken","onAuthError","generateRandomData","len","crypto","msCrypto","getRandomValues","j","Math","floor","random","generateCodeVerifier","generateRandomString","alphabet","randomData","chars","String","fromCharCode","apply","generatePkceChallenge","codeVerifier","hashBytes","encodedHash","replace","createUUID","nonce","callbackState","encodeURIComponent","baseUrl","action","endpoints","register","authorize","scope","url","clientId","maxAge","loginHint","idpHint","locale","kcLocale","pkceCodeVerifier","pkceChallenge","add","logout","createLogoutUrl","createRegisterUrl","createAccountUrl","realm","getRealmUrl","undefined","accountManagement","hasRealmRole","role","access","realmAccess","roles","hasResourceRole","resource","resourceAccess","loadUserProfile","req","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","status","profile","JSON","parse","responseText","send","loadUserInfo","userinfo","userInfo","isTokenExpired","minValidity","tokenParsed","expiresIn","ceil","Date","getTime","isNaN","exec","params","withCredentials","timeLocal","tokenResponse","onAuthRefreshSuccess","pop","clearToken","onAuthRefreshError","iframePromise","onAuthLogout","authServerUrl","charAt","getOrigin","protocol","hostname","port","error_description","access_token","id_token","authSuccess","accessToken","fulfillPromise","storedNonce","refreshTokenParsed","idTokenParsed","configUrl","setupOidcEndoints","oidcConfiguration","checkSessionIframe","authorization_endpoint","token_endpoint","end_session_endpoint","check_session_iframe","userinfo_endpoint","fileLoaded","oidcProvider","match","substr","oidcProviderConfigUrl","oidcProviderConfig","xhr","responseURL","startsWith","tokenTimeoutHandle","clearTimeout","decodeToken","sessionId","session_state","subject","sub","realm_access","resource_access","iat","onTokenExpired","round","setTimeout","str","slice","decodeURIComponent","escape","atob","hexDigits","uuid","parseCallbackUrl","oauthState","get","supportedParams","queryIndex","fragmentIndex","parsed","parseCallbackParams","paramsString","oauthParams","result","internal","createNativePromise","createLegacyPromise","resolve","reject","Promise","successCallback","errorCallback","iframe","onload","authUrl","iframeOrigin","callbacks","splice","msg","postMessage","type","accountUrl","encodeHash","arguments","cordovaOpenWindowWrapper","loginUrl","target","InAppBrowser","shallowCloneCordovaOptions","userOptions","cordovaOptions","keys","reduce","optionName","formatCordovaOptions","createCordovaOptions","hidden","ref","completed","closed","closeBrowser","close","reason","logoutUrl","registerUrl","universalLinks","subscribe","unsubscribe","plugins","browsertab","openUrl","LocalStorage","localStorage","setItem","removeItem","cs","clearExpired","time","key","value","getItem","expires","err","stringify","CookieStorage","getCookie","setCookie","cookieExpiration","minutes","exp","setTime","name","ca","cookie","expirationDate","toUTCString","fn"],"mappings":"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","sourcesContent":["/*\n * Copyright 2016 Red Hat, Inc. and/or its affiliates\n * and other contributors as indicated by the @author tags.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n(function(root, factory) {\n    if ( typeof exports === 'object' ) {\n        if ( typeof module === 'object' ) {\n            module.exports = factory( require(\"js-sha256\"), require(\"base64-js\") );    \n        } else {\n            exports[\"keycloak\"] = factory( require(\"js-sha256\"), require(\"base64-js\") );    \n        }\n    } else {\n        /**\n        * [js-sha256]{@link https://github.com/emn178/js-sha256}\n        *\n        * @version 0.9.0\n        * @author Chen, Yi-Cyuan [emn178@gmail.com]\n        * @copyright Chen, Yi-Cyuan 2014-2017\n        * @license MIT\n        */\n        !function () { \"use strict\"; function t(t, i) { i ? (d[0] = d[16] = d[1] = d[2] = d[3] = d[4] = d[5] = d[6] = d[7] = d[8] = d[9] = d[10] = d[11] = d[12] = d[13] = d[14] = d[15] = 0, this.blocks = d) : this.blocks = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0], t ? (this.h0 = 3238371032, this.h1 = 914150663, this.h2 = 812702999, this.h3 = 4144912697, this.h4 = 4290775857, this.h5 = 1750603025, this.h6 = 1694076839, this.h7 = 3204075428) : (this.h0 = 1779033703, this.h1 = 3144134277, this.h2 = 1013904242, this.h3 = 2773480762, this.h4 = 1359893119, this.h5 = 2600822924, this.h6 = 528734635, this.h7 = 1541459225), this.block = this.start = this.bytes = this.hBytes = 0, this.finalized = this.hashed = !1, this.first = !0, this.is224 = t } function i(i, r, s) { var e, n = typeof i; if (\"string\" === n) { var o, a = [], u = i.length, c = 0; for (e = 0; e < u; ++e)(o = i.charCodeAt(e)) < 128 ? a[c++] = o : o < 2048 ? (a[c++] = 192 | o >> 6, a[c++] = 128 | 63 & o) : o < 55296 || o >= 57344 ? (a[c++] = 224 | o >> 12, a[c++] = 128 | o >> 6 & 63, a[c++] = 128 | 63 & o) : (o = 65536 + ((1023 & o) << 10 | 1023 & i.charCodeAt(++e)), a[c++] = 240 | o >> 18, a[c++] = 128 | o >> 12 & 63, a[c++] = 128 | o >> 6 & 63, a[c++] = 128 | 63 & o); i = a } else { if (\"object\" !== n) throw new Error(h); if (null === i) throw new Error(h); if (f && i.constructor === ArrayBuffer) i = new Uint8Array(i); else if (!(Array.isArray(i) || f && ArrayBuffer.isView(i))) throw new Error(h) } i.length > 64 && (i = new t(r, !0).update(i).array()); var y = [], p = []; for (e = 0; e < 64; ++e) { var l = i[e] || 0; y[e] = 92 ^ l, p[e] = 54 ^ l } t.call(this, r, s), this.update(p), this.oKeyPad = y, this.inner = !0, this.sharedMemory = s } var h = \"input is invalid type\", r = \"object\" == typeof window, s = r ? window : {}; s.JS_SHA256_NO_WINDOW && (r = !1); var e = !r && \"object\" == typeof self, n = !s.JS_SHA256_NO_NODE_JS && \"object\" == typeof process && process.versions && process.versions.node; n ? s = global : e && (s = self); var o = !s.JS_SHA256_NO_COMMON_JS && \"object\" == typeof module && module.exports, a = \"function\" == typeof define && define.amd, f = !s.JS_SHA256_NO_ARRAY_BUFFER && \"undefined\" != typeof ArrayBuffer, u = \"0123456789abcdef\".split(\"\"), c = [-2147483648, 8388608, 32768, 128], y = [24, 16, 8, 0], p = [1116352408, 1899447441, 3049323471, 3921009573, 961987163, 1508970993, 2453635748, 2870763221, 3624381080, 310598401, 607225278, 1426881987, 1925078388, 2162078206, 2614888103, 3248222580, 3835390401, 4022224774, 264347078, 604807628, 770255983, 1249150122, 1555081692, 1996064986, 2554220882, 2821834349, 2952996808, 3210313671, 3336571891, 3584528711, 113926993, 338241895, 666307205, 773529912, 1294757372, 1396182291, 1695183700, 1986661051, 2177026350, 2456956037, 2730485921, 2820302411, 3259730800, 3345764771, 3516065817, 3600352804, 4094571909, 275423344, 430227734, 506948616, 659060556, 883997877, 958139571, 1322822218, 1537002063, 1747873779, 1955562222, 2024104815, 2227730452, 2361852424, 2428436474, 2756734187, 3204031479, 3329325298], l = [\"hex\", \"array\", \"digest\", \"arrayBuffer\"], d = []; !s.JS_SHA256_NO_NODE_JS && Array.isArray || (Array.isArray = function (t) { return \"[object Array]\" === Object.prototype.toString.call(t) }), !f || !s.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW && ArrayBuffer.isView || (ArrayBuffer.isView = function (t) { return \"object\" == typeof t && t.buffer && t.buffer.constructor === ArrayBuffer }); var A = function (i, h) { return function (r) { return new t(h, !0).update(r)[i]() } }, w = function (i) { var h = A(\"hex\", i); n && (h = b(h, i)), h.create = function () { return new t(i) }, h.update = function (t) { return h.create().update(t) }; for (var r = 0; r < l.length; ++r) { var s = l[r]; h[s] = A(s, i) } return h }, b = function (t, i) { var r = eval(\"require('crypto')\"), s = eval(\"require('buffer').Buffer\"), e = i ? \"sha224\" : \"sha256\", n = function (i) { if (\"string\" == typeof i) return r.createHash(e).update(i, \"utf8\").digest(\"hex\"); if (null === i || void 0 === i) throw new Error(h); return i.constructor === ArrayBuffer && (i = new Uint8Array(i)), Array.isArray(i) || ArrayBuffer.isView(i) || i.constructor === s ? r.createHash(e).update(new s(i)).digest(\"hex\") : t(i) }; return n }, v = function (t, h) { return function (r, s) { return new i(r, h, !0).update(s)[t]() } }, _ = function (t) { var h = v(\"hex\", t); h.create = function (h) { return new i(h, t) }, h.update = function (t, i) { return h.create(t).update(i) }; for (var r = 0; r < l.length; ++r) { var s = l[r]; h[s] = v(s, t) } return h }; t.prototype.update = function (t) { if (!this.finalized) { var i, r = typeof t; if (\"string\" !== r) { if (\"object\" !== r) throw new Error(h); if (null === t) throw new Error(h); if (f && t.constructor === ArrayBuffer) t = new Uint8Array(t); else if (!(Array.isArray(t) || f && ArrayBuffer.isView(t))) throw new Error(h); i = !0 } for (var s, e, n = 0, o = t.length, a = this.blocks; n < o;) { if (this.hashed && (this.hashed = !1, a[0] = this.block, a[16] = a[1] = a[2] = a[3] = a[4] = a[5] = a[6] = a[7] = a[8] = a[9] = a[10] = a[11] = a[12] = a[13] = a[14] = a[15] = 0), i) for (e = this.start; n < o && e < 64; ++n)a[e >> 2] |= t[n] << y[3 & e++]; else for (e = this.start; n < o && e < 64; ++n)(s = t.charCodeAt(n)) < 128 ? a[e >> 2] |= s << y[3 & e++] : s < 2048 ? (a[e >> 2] |= (192 | s >> 6) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]) : s < 55296 || s >= 57344 ? (a[e >> 2] |= (224 | s >> 12) << y[3 & e++], a[e >> 2] |= (128 | s >> 6 & 63) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]) : (s = 65536 + ((1023 & s) << 10 | 1023 & t.charCodeAt(++n)), a[e >> 2] |= (240 | s >> 18) << y[3 & e++], a[e >> 2] |= (128 | s >> 12 & 63) << y[3 & e++], a[e >> 2] |= (128 | s >> 6 & 63) << y[3 & e++], a[e >> 2] |= (128 | 63 & s) << y[3 & e++]); this.lastByteIndex = e, this.bytes += e - this.start, e >= 64 ? (this.block = a[16], this.start = e - 64, this.hash(), this.hashed = !0) : this.start = e } return this.bytes > 4294967295 && (this.hBytes += this.bytes / 4294967296 << 0, this.bytes = this.bytes % 4294967296), this } }, t.prototype.finalize = function () { if (!this.finalized) { this.finalized = !0; var t = this.blocks, i = this.lastByteIndex; t[16] = this.block, t[i >> 2] |= c[3 & i], this.block = t[16], i >= 56 && (this.hashed || this.hash(), t[0] = this.block, t[16] = t[1] = t[2] = t[3] = t[4] = t[5] = t[6] = t[7] = t[8] = t[9] = t[10] = t[11] = t[12] = t[13] = t[14] = t[15] = 0), t[14] = this.hBytes << 3 | this.bytes >>> 29, t[15] = this.bytes << 3, this.hash() } }, t.prototype.hash = function () { var t, i, h, r, s, e, n, o, a, f = this.h0, u = this.h1, c = this.h2, y = this.h3, l = this.h4, d = this.h5, A = this.h6, w = this.h7, b = this.blocks; for (t = 16; t < 64; ++t)i = ((s = b[t - 15]) >>> 7 | s << 25) ^ (s >>> 18 | s << 14) ^ s >>> 3, h = ((s = b[t - 2]) >>> 17 | s << 15) ^ (s >>> 19 | s << 13) ^ s >>> 10, b[t] = b[t - 16] + i + b[t - 7] + h << 0; for (a = u & c, t = 0; t < 64; t += 4)this.first ? (this.is224 ? (e = 300032, w = (s = b[0] - 1413257819) - 150054599 << 0, y = s + 24177077 << 0) : (e = 704751109, w = (s = b[0] - 210244248) - 1521486534 << 0, y = s + 143694565 << 0), this.first = !1) : (i = (f >>> 2 | f << 30) ^ (f >>> 13 | f << 19) ^ (f >>> 22 | f << 10), r = (e = f & u) ^ f & c ^ a, w = y + (s = w + (h = (l >>> 6 | l << 26) ^ (l >>> 11 | l << 21) ^ (l >>> 25 | l << 7)) + (l & d ^ ~l & A) + p[t] + b[t]) << 0, y = s + (i + r) << 0), i = (y >>> 2 | y << 30) ^ (y >>> 13 | y << 19) ^ (y >>> 22 | y << 10), r = (n = y & f) ^ y & u ^ e, A = c + (s = A + (h = (w >>> 6 | w << 26) ^ (w >>> 11 | w << 21) ^ (w >>> 25 | w << 7)) + (w & l ^ ~w & d) + p[t + 1] + b[t + 1]) << 0, i = ((c = s + (i + r) << 0) >>> 2 | c << 30) ^ (c >>> 13 | c << 19) ^ (c >>> 22 | c << 10), r = (o = c & y) ^ c & f ^ n, d = u + (s = d + (h = (A >>> 6 | A << 26) ^ (A >>> 11 | A << 21) ^ (A >>> 25 | A << 7)) + (A & w ^ ~A & l) + p[t + 2] + b[t + 2]) << 0, i = ((u = s + (i + r) << 0) >>> 2 | u << 30) ^ (u >>> 13 | u << 19) ^ (u >>> 22 | u << 10), r = (a = u & c) ^ u & y ^ o, l = f + (s = l + (h = (d >>> 6 | d << 26) ^ (d >>> 11 | d << 21) ^ (d >>> 25 | d << 7)) + (d & A ^ ~d & w) + p[t + 3] + b[t + 3]) << 0, f = s + (i + r) << 0; this.h0 = this.h0 + f << 0, this.h1 = this.h1 + u << 0, this.h2 = this.h2 + c << 0, this.h3 = this.h3 + y << 0, this.h4 = this.h4 + l << 0, this.h5 = this.h5 + d << 0, this.h6 = this.h6 + A << 0, this.h7 = this.h7 + w << 0 }, t.prototype.hex = function () { this.finalize(); var t = this.h0, i = this.h1, h = this.h2, r = this.h3, s = this.h4, e = this.h5, n = this.h6, o = this.h7, a = u[t >> 28 & 15] + u[t >> 24 & 15] + u[t >> 20 & 15] + u[t >> 16 & 15] + u[t >> 12 & 15] + u[t >> 8 & 15] + u[t >> 4 & 15] + u[15 & t] + u[i >> 28 & 15] + u[i >> 24 & 15] + u[i >> 20 & 15] + u[i >> 16 & 15] + u[i >> 12 & 15] + u[i >> 8 & 15] + u[i >> 4 & 15] + u[15 & i] + u[h >> 28 & 15] + u[h >> 24 & 15] + u[h >> 20 & 15] + u[h >> 16 & 15] + u[h >> 12 & 15] + u[h >> 8 & 15] + u[h >> 4 & 15] + u[15 & h] + u[r >> 28 & 15] + u[r >> 24 & 15] + u[r >> 20 & 15] + u[r >> 16 & 15] + u[r >> 12 & 15] + u[r >> 8 & 15] + u[r >> 4 & 15] + u[15 & r] + u[s >> 28 & 15] + u[s >> 24 & 15] + u[s >> 20 & 15] + u[s >> 16 & 15] + u[s >> 12 & 15] + u[s >> 8 & 15] + u[s >> 4 & 15] + u[15 & s] + u[e >> 28 & 15] + u[e >> 24 & 15] + u[e >> 20 & 15] + u[e >> 16 & 15] + u[e >> 12 & 15] + u[e >> 8 & 15] + u[e >> 4 & 15] + u[15 & e] + u[n >> 28 & 15] + u[n >> 24 & 15] + u[n >> 20 & 15] + u[n >> 16 & 15] + u[n >> 12 & 15] + u[n >> 8 & 15] + u[n >> 4 & 15] + u[15 & n]; return this.is224 || (a += u[o >> 28 & 15] + u[o >> 24 & 15] + u[o >> 20 & 15] + u[o >> 16 & 15] + u[o >> 12 & 15] + u[o >> 8 & 15] + u[o >> 4 & 15] + u[15 & o]), a }, t.prototype.toString = t.prototype.hex, t.prototype.digest = function () { this.finalize(); var t = this.h0, i = this.h1, h = this.h2, r = this.h3, s = this.h4, e = this.h5, n = this.h6, o = this.h7, a = [t >> 24 & 255, t >> 16 & 255, t >> 8 & 255, 255 & t, i >> 24 & 255, i >> 16 & 255, i >> 8 & 255, 255 & i, h >> 24 & 255, h >> 16 & 255, h >> 8 & 255, 255 & h, r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, 255 & r, s >> 24 & 255, s >> 16 & 255, s >> 8 & 255, 255 & s, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, n >> 24 & 255, n >> 16 & 255, n >> 8 & 255, 255 & n]; return this.is224 || a.push(o >> 24 & 255, o >> 16 & 255, o >> 8 & 255, 255 & o), a }, t.prototype.array = t.prototype.digest, t.prototype.arrayBuffer = function () { this.finalize(); var t = new ArrayBuffer(this.is224 ? 28 : 32), i = new DataView(t); return i.setUint32(0, this.h0), i.setUint32(4, this.h1), i.setUint32(8, this.h2), i.setUint32(12, this.h3), i.setUint32(16, this.h4), i.setUint32(20, this.h5), i.setUint32(24, this.h6), this.is224 || i.setUint32(28, this.h7), t }, i.prototype = new t, i.prototype.finalize = function () { if (t.prototype.finalize.call(this), this.inner) { this.inner = !1; var i = this.array(); t.call(this, this.is224, this.sharedMemory), this.update(this.oKeyPad), this.update(i), t.prototype.finalize.call(this) } }; var B = w(); B.sha256 = B, B.sha224 = w(!0), B.sha256.hmac = _(), B.sha224.hmac = _(!0), o ? module.exports = B : (s.sha256 = B.sha256, s.sha224 = B.sha224, a && define(function () { return B })) }();\n\n        /**\n         * [base64-js]{@link https://github.com/beatgammit/base64-js}\n         *\n         * @version v1.3.0 \n         * @author Kirill, Fomichev\n         * @copyright Kirill, Fomichev 2014\n         * @license MIT\n         */\n        (function (r) { if (typeof exports === \"object\" && typeof module !== \"undefined\") { module.exports = r() } else if (typeof define === \"function\" && define.amd) { define([], r) } else { var e; if (typeof window !== \"undefined\") { e = window } else if (typeof global !== \"undefined\") { e = global } else if (typeof self !== \"undefined\") { e = self } else { e = this } e.base64js = r() } })(function () { var r, e, n; return function () { function r(e, n, t) { function o(f, i) { if (!n[f]) { if (!e[f]) { var u = \"function\" == typeof require && require; if (!i && u) return u(f, !0); if (a) return a(f, !0); var v = new Error(\"Cannot find module '\" + f + \"'\"); throw v.code = \"MODULE_NOT_FOUND\", v } var d = n[f] = { exports: {} }; e[f][0].call(d.exports, function (r) { var n = e[f][1][r]; return o(n || r) }, d, d.exports, r, e, n, t) } return n[f].exports } for (var a = \"function\" == typeof require && require, f = 0; f < t.length; f++)o(t[f]); return o } return r }()({ \"/\": [function (r, e, n) { \"use strict\"; n.byteLength = d; n.toByteArray = h; n.fromByteArray = p; var t = []; var o = []; var a = typeof Uint8Array !== \"undefined\" ? Uint8Array : Array; var f = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"; for (var i = 0, u = f.length; i < u; ++i) { t[i] = f[i]; o[f.charCodeAt(i)] = i } o[\"-\".charCodeAt(0)] = 62; o[\"_\".charCodeAt(0)] = 63; function v(r) { var e = r.length; if (e % 4 > 0) { throw new Error(\"Invalid string. Length must be a multiple of 4\") } var n = r.indexOf(\"=\"); if (n === -1) n = e; var t = n === e ? 0 : 4 - n % 4; return [n, t] } function d(r) { var e = v(r); var n = e[0]; var t = e[1]; return (n + t) * 3 / 4 - t } function c(r, e, n) { return (e + n) * 3 / 4 - n } function h(r) { var e; var n = v(r); var t = n[0]; var f = n[1]; var i = new a(c(r, t, f)); var u = 0; var d = f > 0 ? t - 4 : t; for (var h = 0; h < d; h += 4) { e = o[r.charCodeAt(h)] << 18 | o[r.charCodeAt(h + 1)] << 12 | o[r.charCodeAt(h + 2)] << 6 | o[r.charCodeAt(h + 3)]; i[u++] = e >> 16 & 255; i[u++] = e >> 8 & 255; i[u++] = e & 255 } if (f === 2) { e = o[r.charCodeAt(h)] << 2 | o[r.charCodeAt(h + 1)] >> 4; i[u++] = e & 255 } if (f === 1) { e = o[r.charCodeAt(h)] << 10 | o[r.charCodeAt(h + 1)] << 4 | o[r.charCodeAt(h + 2)] >> 2; i[u++] = e >> 8 & 255; i[u++] = e & 255 } return i } function s(r) { return t[r >> 18 & 63] + t[r >> 12 & 63] + t[r >> 6 & 63] + t[r & 63] } function l(r, e, n) { var t; var o = []; for (var a = e; a < n; a += 3) { t = (r[a] << 16 & 16711680) + (r[a + 1] << 8 & 65280) + (r[a + 2] & 255); o.push(s(t)) } return o.join(\"\") } function p(r) { var e; var n = r.length; var o = n % 3; var a = []; var f = 16383; for (var i = 0, u = n - o; i < u; i += f) { a.push(l(r, i, i + f > u ? u : i + f)) } if (o === 1) { e = r[n - 1]; a.push(t[e >> 2] + t[e << 4 & 63] + \"==\") } else if (o === 2) { e = (r[n - 2] << 8) + r[n - 1]; a.push(t[e >> 10] + t[e >> 4 & 63] + t[e << 2 & 63] + \"=\") } return a.join(\"\") } }, {}] }, {}, [])(\"/\") });\n\n        var Keycloak = factory( root[\"sha256\"], root[\"base64js\"] );\n        root[\"Keycloak\"] = Keycloak;\n\n        if ( typeof define === \"function\" && define.amd ) { \n            define( \"keycloak\", [], function () { return Keycloak; } );\n        }\n    }\n})(window, function (sha256_imported, base64js_imported) {\n    function Keycloak (config) {\n        if (!(this instanceof Keycloak)) {\n            return new Keycloak(config);\n        }\n\n        var kc = this;\n        var adapter;\n        var refreshQueue = [];\n        var callbackStorage;\n\n        var loginIframe = {\n            enable: true,\n            callbackList: [],\n            interval: 5\n        };\n\n        var scripts = document.getElementsByTagName('script');\n        for (var i = 0; i < scripts.length; i++) {\n            if ((scripts[i].src.indexOf('keycloak.js') !== -1 || scripts[i].src.indexOf('keycloak.min.js') !== -1) && scripts[i].src.indexOf('version=') !== -1) {\n                kc.iframeVersion = scripts[i].src.substring(scripts[i].src.indexOf('version=') + 8).split('&')[0];\n            }\n        }\n\n        var useNonce = true;\n        var logInfo = createLogger(console.info);\n        var logWarn = createLogger(console.warn);\n        \n        kc.init = function (initOptions) {\n            kc.authenticated = false;\n\n            callbackStorage = createCallbackStorage();\n            var adapters = ['default', 'cordova', 'cordova-native'];\n\n            if (initOptions && adapters.indexOf(initOptions.adapter) > -1) {\n                adapter = loadAdapter(initOptions.adapter);\n            } else if (initOptions && typeof initOptions.adapter === \"object\") {\n                adapter = initOptions.adapter;\n            } else {\n                if (window.Cordova || window.cordova) {\n                    adapter = loadAdapter('cordova');\n                } else {\n                    adapter = loadAdapter();\n                }\n            }\n\n            if (initOptions) {\n                if (typeof initOptions.useNonce !== 'undefined') {\n                    useNonce = initOptions.useNonce;\n                }\n\n                if (typeof initOptions.checkLoginIframe !== 'undefined') {\n                    loginIframe.enable = initOptions.checkLoginIframe;\n                }\n\n                if (initOptions.checkLoginIframeInterval) {\n                    loginIframe.interval = initOptions.checkLoginIframeInterval;\n                }\n\n                if (initOptions.promiseType === 'native') {\n                    kc.useNativePromise = true;\n                } else {\n                    console.warn('[KEYCLOAK] Using legacy promises is deprecated and will be removed in future versions. You can opt in to using native promises by setting `promiseType` to \\'native\\' when initializing Keycloak.');\n                    kc.useNativePromise = false;\n                }\n\n                if (initOptions.onLoad === 'login-required') {\n                    kc.loginRequired = true;\n                }\n\n                if (initOptions.responseMode) {\n                    if (initOptions.responseMode === 'query' || initOptions.responseMode === 'fragment') {\n                        kc.responseMode = initOptions.responseMode;\n                    } else {\n                        throw 'Invalid value for responseMode';\n                    }\n                }\n\n                if (initOptions.flow) {\n                    switch (initOptions.flow) {\n                        case 'standard':\n                            kc.responseType = 'code';\n                            break;\n                        case 'implicit':\n                            kc.responseType = 'id_token token';\n                            break;\n                        case 'hybrid':\n                            kc.responseType = 'code id_token token';\n                            break;\n                        default:\n                            throw 'Invalid value for flow';\n                    }\n                    kc.flow = initOptions.flow;\n                }\n\n                if (initOptions.timeSkew != null) {\n                    kc.timeSkew = initOptions.timeSkew;\n                }\n\n                if(initOptions.redirectUri) {\n                    kc.redirectUri = initOptions.redirectUri;\n                }\n\n                if (initOptions.silentCheckSsoRedirectUri) {\n                    kc.silentCheckSsoRedirectUri = initOptions.silentCheckSsoRedirectUri;\n                }\n\n                if (initOptions.pkceMethod) {\n                    if (initOptions.pkceMethod !== \"S256\") {\n                        throw 'Invalid value for pkceMethod';\n                    }\n                    kc.pkceMethod = initOptions.pkceMethod;\n                }\n\n                if (typeof initOptions.enableLogging === 'boolean') {\n                    kc.enableLogging = initOptions.enableLogging;\n                } else {\n                    kc.enableLogging = false;\n                }\n            }\n\n            if (!kc.responseMode) {\n                kc.responseMode = 'fragment';\n            }\n            if (!kc.responseType) {\n                kc.responseType = 'code';\n                kc.flow = 'standard';\n            }\n\n            var promise = createPromise(false);\n\n            var initPromise = createPromise(true);\n            initPromise.promise.success(function() {\n                kc.onReady && kc.onReady(kc.authenticated);\n                promise.setSuccess(kc.authenticated);\n            }).error(function(errorData) {\n                promise.setError(errorData);\n            });\n\n            var configPromise = loadConfig(config);\n\n            function onLoad() {\n                var doLogin = function(prompt) {\n                    if (!prompt) {\n                        options.prompt = 'none';\n                    }\n                    if (kc.useNativePromise) {\n                        kc.login(options).then(function () {\n                            initPromise.setSuccess();\n                        }).catch(function () {\n                            initPromise.setError();\n                        });\n                    } else {\n                        kc.login(options).success(function () {\n                            initPromise.setSuccess();\n                        }).error(function () {\n                            initPromise.setError();\n                        });\n                    }\n                }\n\n                var checkSsoSilently = function() {\n                    var ifrm = document.createElement(\"iframe\");\n                    var src = kc.createLoginUrl({prompt: 'none', redirectUri: kc.silentCheckSsoRedirectUri});\n                    ifrm.setAttribute(\"src\", src);\n                    ifrm.setAttribute(\"title\", \"keycloak-silent-check-sso\");\n                    ifrm.style.display = \"none\";\n                    document.body.appendChild(ifrm);\n\n                    var messageCallback = function(event) {\n                        if (event.origin !== window.location.origin || ifrm.contentWindow !== event.source) {\n                            return;\n                        }\n\n                        var oauth = parseCallback(event.data);\n                        processCallback(oauth, initPromise);\n\n                        document.body.removeChild(ifrm);\n                        window.removeEventListener(\"message\", messageCallback);\n                    };\n\n                    window.addEventListener(\"message\", messageCallback);\n                };\n\n                var options = {};\n                switch (initOptions.onLoad) {\n                    case 'check-sso':\n                        if (loginIframe.enable) {\n                            setupCheckLoginIframe().success(function() {\n                                checkLoginIframe().success(function (unchanged) {\n                                    if (!unchanged) {\n                                        kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                                    } else {\n                                        initPromise.setSuccess();\n                                    }\n                                }).error(function () {\n                                    initPromise.setError();\n                                });\n                            });\n                        } else {\n                            kc.silentCheckSsoRedirectUri ? checkSsoSilently() : doLogin(false);\n                        }\n                        break;\n                    case 'login-required':\n                        doLogin(true);\n                        break;\n                    default:\n                        throw 'Invalid value for onLoad';\n                }\n            }\n\n            function processInit() {\n                var callback = parseCallback(window.location.href);\n\n                if (callback) {\n                    window.history.replaceState(window.history.state, null, callback.newUrl);\n                }\n\n                if (callback && callback.valid) {\n                    return setupCheckLoginIframe().success(function() {\n                        processCallback(callback, initPromise);\n                    }).error(function (e) {\n                        initPromise.setError();\n                    });\n                } else if (initOptions) {\n                    if (initOptions.token && initOptions.refreshToken) {\n                        setToken(initOptions.token, initOptions.refreshToken, initOptions.idToken);\n\n                        if (loginIframe.enable) {\n                            setupCheckLoginIframe().success(function() {\n                                checkLoginIframe().success(function (unchanged) {\n                                    if (unchanged) {\n                                        kc.onAuthSuccess && kc.onAuthSuccess();\n                                        initPromise.setSuccess();\n                                        scheduleCheckIframe();\n                                    } else {\n                                        initPromise.setSuccess();\n                                    }\n                                }).error(function () {\n                                    initPromise.setError();\n                                });\n                            });\n                        } else {\n                            kc.updateToken(-1).success(function() {\n                                kc.onAuthSuccess && kc.onAuthSuccess();\n                                initPromise.setSuccess();\n                            }).error(function() {\n                                kc.onAuthError && kc.onAuthError();\n                                if (initOptions.onLoad) {\n                                    onLoad();\n                                } else {\n                                    initPromise.setError();\n                                }\n                            });\n                        }\n                    } else if (initOptions.onLoad) {\n                        onLoad();\n                    } else {\n                        initPromise.setSuccess();\n                    }\n                } else {\n                    initPromise.setSuccess();\n                }\n            }\n\n            configPromise.success(processInit);\n            configPromise.error(function() {\n                promise.setError();\n            });\n\n            return promise.promise;\n        }\n\n        kc.login = function (options) {\n            return adapter.login(options);\n        }\n\n        function generateRandomData(len) {\n            // use web crypto APIs if possible\n            var array = null;\n            var crypto = window.crypto || window.msCrypto;\n            if (crypto && crypto.getRandomValues && window.Uint8Array) {\n                array = new Uint8Array(len);\n                crypto.getRandomValues(array);\n                return array;\n            }\n\n            // fallback to Math random\n            array = new Array(len);\n            for (var j = 0; j < array.length; j++) {\n                array[j] = Math.floor(256 * Math.random());\n            }\n            return array;\n        }\n\n        function generateCodeVerifier(len) {\n            return generateRandomString(len, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789');\n        }\n\n        function generateRandomString(len, alphabet){\n            var randomData = generateRandomData(len);\n            var chars = new Array(len);\n            for (var i = 0; i < len; i++) {\n                chars[i] = alphabet.charCodeAt(randomData[i] % alphabet.length);\n            }\n            return String.fromCharCode.apply(null, chars);\n        }\n\n        function generatePkceChallenge(pkceMethod, codeVerifier) {\n            switch (pkceMethod) {\n                // The use of the \"plain\" method is considered insecure and therefore not supported.\n                case \"S256\":\n                    // hash codeVerifier, then encode as url-safe base64 without padding\n                    var hashBytes = new Uint8Array(sha256_imported.arrayBuffer(codeVerifier));\n                    var encodedHash = base64js_imported.fromByteArray(hashBytes)\n                        .replace(/\\+/g, '-')\n                        .replace(/\\//g, '_')\n                        .replace(/\\=/g, '');\n                    return encodedHash;\n                default:\n                    throw 'Invalid value for pkceMethod';\n            }\n        }\n\n        kc.createLoginUrl = function(options) {\n            var state = createUUID();\n            var nonce = createUUID();\n\n            var redirectUri = adapter.redirectUri(options);\n\n            var callbackState = {\n                state: state,\n                nonce: nonce,\n                redirectUri: encodeURIComponent(redirectUri)\n            };\n\n            if (options && options.prompt) {\n                callbackState.prompt = options.prompt;\n            }\n\n            var baseUrl;\n            if (options && options.action == 'register') {\n                baseUrl = kc.endpoints.register();\n            } else {\n                baseUrl = kc.endpoints.authorize();\n            }\n\n            var scope;\n            if (options && options.scope) {\n                if (options.scope.indexOf(\"openid\") != -1) {\n                    scope = options.scope;\n                } else {\n                    scope = \"openid \" + options.scope;\n                }\n            } else {\n                scope = \"openid\";\n            }\n\n            var url = baseUrl\n                + '?client_id=' + encodeURIComponent(kc.clientId)\n                + '&redirect_uri=' + encodeURIComponent(redirectUri)\n                + '&state=' + encodeURIComponent(state)\n                + '&response_mode=' + encodeURIComponent(kc.responseMode)\n                + '&response_type=' + encodeURIComponent(kc.responseType)\n                + '&scope=' + encodeURIComponent(scope);\n            if (useNonce) {\n                url = url + '&nonce=' + encodeURIComponent(nonce);\n            }\n\n            if (options && options.prompt) {\n                url += '&prompt=' + encodeURIComponent(options.prompt);\n            }\n\n            if (options && options.maxAge) {\n                url += '&max_age=' + encodeURIComponent(options.maxAge);\n            }\n\n            if (options && options.loginHint) {\n                url += '&login_hint=' + encodeURIComponent(options.loginHint);\n            }\n\n            if (options && options.idpHint) {\n                url += '&kc_idp_hint=' + encodeURIComponent(options.idpHint);\n            }\n\n            if (options && options.locale) {\n                url += '&ui_locales=' + encodeURIComponent(options.locale);\n            }\n\n            if (options && options.kcLocale) {\n                url += '&kc_locale=' + encodeURIComponent(options.kcLocale);\n            }\n\n            if (kc.pkceMethod) {\n                var codeVerifier = generateCodeVerifier(96);\n                callbackState.pkceCodeVerifier = codeVerifier;\n                var pkceChallenge = generatePkceChallenge(kc.pkceMethod, codeVerifier);\n                url += '&code_challenge=' + pkceChallenge;\n                url += '&code_challenge_method=' + kc.pkceMethod;\n            }\n\n            callbackStorage.add(callbackState);\n\n            return url;\n        }\n\n        kc.logout = function(options) {\n            return adapter.logout(options);\n        }\n\n        kc.createLogoutUrl = function(options) {\n            var url = kc.endpoints.logout()\n                + '?redirect_uri=' + encodeURIComponent(adapter.redirectUri(options, false));\n\n            return url;\n        }\n\n        kc.register = function (options) {\n            return adapter.register(options);\n        }\n\n        kc.createRegisterUrl = function(options) {\n            if (!options) {\n                options = {};\n            }\n            options.action = 'register';\n            return kc.createLoginUrl(options);\n        }\n\n        kc.createAccountUrl = function(options) {\n            var realm = getRealmUrl();\n            var url = undefined;\n            if (typeof realm !== 'undefined') {\n                url = realm\n                + '/account'\n                + '?referrer=' + encodeURIComponent(kc.clientId)\n                + '&referrer_uri=' + encodeURIComponent(adapter.redirectUri(options));\n            }\n            return url;\n        }\n\n        kc.accountManagement = function() {\n            return adapter.accountManagement();\n        }\n\n        kc.hasRealmRole = function (role) {\n            var access = kc.realmAccess;\n            return !!access && access.roles.indexOf(role) >= 0;\n        }\n\n        kc.hasResourceRole = function(role, resource) {\n            if (!kc.resourceAccess) {\n                return false;\n            }\n\n            var access = kc.resourceAccess[resource || kc.clientId];\n            return !!access && access.roles.indexOf(role) >= 0;\n        }\n\n        kc.loadUserProfile = function() {\n            var url = getRealmUrl() + '/account';\n            var req = new XMLHttpRequest();\n            req.open('GET', url, true);\n            req.setRequestHeader('Accept', 'application/json');\n            req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n\n            var promise = createPromise(false);\n\n            req.onreadystatechange = function () {\n                if (req.readyState == 4) {\n                    if (req.status == 200) {\n                        kc.profile = JSON.parse(req.responseText);\n                        promise.setSuccess(kc.profile);\n                    } else {\n                        promise.setError();\n                    }\n                }\n            }\n\n            req.send();\n\n            return promise.promise;\n        }\n\n        kc.loadUserInfo = function() {\n            var url = kc.endpoints.userinfo();\n            var req = new XMLHttpRequest();\n            req.open('GET', url, true);\n            req.setRequestHeader('Accept', 'application/json');\n            req.setRequestHeader('Authorization', 'bearer ' + kc.token);\n\n            var promise = createPromise(false);\n\n            req.onreadystatechange = function () {\n                if (req.readyState == 4) {\n                    if (req.status == 200) {\n                        kc.userInfo = JSON.parse(req.responseText);\n                        promise.setSuccess(kc.userInfo);\n                    } else {\n                        promise.setError();\n                    }\n                }\n            }\n\n            req.send();\n\n            return promise.promise;\n        }\n\n        kc.isTokenExpired = function(minValidity) {\n            if (!kc.tokenParsed || (!kc.refreshToken && kc.flow != 'implicit' )) {\n                throw 'Not authenticated';\n            }\n\n            if (kc.timeSkew == null) {\n                logInfo('[KEYCLOAK] Unable to determine if token is expired as timeskew is not set');\n                return true;\n            }\n\n            var expiresIn = kc.tokenParsed['exp'] - Math.ceil(new Date().getTime() / 1000) + kc.timeSkew;\n            if (minValidity) {\n                if (isNaN(minValidity)) {\n                    throw 'Invalid minValidity';\n                }\n                expiresIn -= minValidity;\n            }\n            return expiresIn < 0;\n        }\n\n        kc.updateToken = function(minValidity) {\n            var promise = createPromise(false);\n\n            if (!kc.refreshToken) {\n                promise.setError();\n                return promise.promise;\n            }\n\n            minValidity = minValidity || 5;\n\n            var exec = function() {\n                var refreshToken = false;\n                if (minValidity == -1) {\n                    refreshToken = true;\n                    logInfo('[KEYCLOAK] Refreshing token: forced refresh');\n                } else if (!kc.tokenParsed || kc.isTokenExpired(minValidity)) {\n                    refreshToken = true;\n                    logInfo('[KEYCLOAK] Refreshing token: token expired');\n                }\n\n                if (!refreshToken) {\n                    promise.setSuccess(false);\n                } else {\n                    var params = 'grant_type=refresh_token&' + 'refresh_token=' + kc.refreshToken;\n                    var url = kc.endpoints.token();\n\n                    refreshQueue.push(promise);\n\n                    if (refreshQueue.length == 1) {\n                        var req = new XMLHttpRequest();\n                        req.open('POST', url, true);\n                        req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n                        req.withCredentials = true;\n\n                        params += '&client_id=' + encodeURIComponent(kc.clientId);\n\n                        var timeLocal = new Date().getTime();\n\n                        req.onreadystatechange = function () {\n                            if (req.readyState == 4) {\n                                if (req.status == 200) {\n                                    logInfo('[KEYCLOAK] Token refreshed');\n\n                                    timeLocal = (timeLocal + new Date().getTime()) / 2;\n\n                                    var tokenResponse = JSON.parse(req.responseText);\n\n                                    setToken(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], timeLocal);\n\n                                    kc.onAuthRefreshSuccess && kc.onAuthRefreshSuccess();\n                                    for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                                        p.setSuccess(true);\n                                    }\n                                } else {\n                                    logWarn('[KEYCLOAK] Failed to refresh token');\n\n                                    if (req.status == 400) {\n                                        kc.clearToken();\n                                    }\n\n                                    kc.onAuthRefreshError && kc.onAuthRefreshError();\n                                    for (var p = refreshQueue.pop(); p != null; p = refreshQueue.pop()) {\n                                        p.setError(true);\n                                    }\n                                }\n                            }\n                        };\n\n                        req.send(params);\n                    }\n                }\n            }\n\n            if (loginIframe.enable) {\n                var iframePromise = checkLoginIframe();\n                iframePromise.success(function() {\n                    exec();\n                }).error(function() {\n                    promise.setError();\n                });\n            } else {\n                exec();\n            }\n\n            return promise.promise;\n        }\n\n        kc.clearToken = function() {\n            if (kc.token) {\n                setToken(null, null, null);\n                kc.onAuthLogout && kc.onAuthLogout();\n                if (kc.loginRequired) {\n                    kc.login();\n                }\n            }\n        }\n\n        function getRealmUrl() {\n            if (typeof kc.authServerUrl !== 'undefined') {\n                if (kc.authServerUrl.charAt(kc.authServerUrl.length - 1) == '/') {\n                    return kc.authServerUrl + 'realms/' + encodeURIComponent(kc.realm);\n                } else {\n                    return kc.authServerUrl + '/realms/' + encodeURIComponent(kc.realm);\n                }\n            } else {\n            \treturn undefined;\n            }\n        }\n\n        function getOrigin() {\n            if (!window.location.origin) {\n                return window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port: '');\n            } else {\n                return window.location.origin;\n            }\n        }\n\n        function processCallback(oauth, promise) {\n            var code = oauth.code;\n            var error = oauth.error;\n            var prompt = oauth.prompt;\n\n            var timeLocal = new Date().getTime();\n\n            if (error) {\n                if (prompt != 'none') {\n                    var errorData = { error: error, error_description: oauth.error_description };\n                    kc.onAuthError && kc.onAuthError(errorData);\n                    promise && promise.setError(errorData);\n                } else {\n                    promise && promise.setSuccess();\n                }\n                return;\n            } else if ((kc.flow != 'standard') && (oauth.access_token || oauth.id_token)) {\n                authSuccess(oauth.access_token, null, oauth.id_token, true);\n            }\n\n            if ((kc.flow != 'implicit') && code) {\n                var params = 'code=' + code + '&grant_type=authorization_code';\n                var url = kc.endpoints.token();\n\n                var req = new XMLHttpRequest();\n                req.open('POST', url, true);\n                req.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n\n                params += '&client_id=' + encodeURIComponent(kc.clientId);\n                params += '&redirect_uri=' + oauth.redirectUri;\n\n                if (oauth.pkceCodeVerifier) {\n                    params += '&code_verifier=' + oauth.pkceCodeVerifier;\n                }\n\n                req.withCredentials = true;\n\n                req.onreadystatechange = function() {\n                    if (req.readyState == 4) {\n                        if (req.status == 200) {\n\n                            var tokenResponse = JSON.parse(req.responseText);\n                            authSuccess(tokenResponse['access_token'], tokenResponse['refresh_token'], tokenResponse['id_token'], kc.flow === 'standard');\n                            scheduleCheckIframe();\n                        } else {\n                            kc.onAuthError && kc.onAuthError();\n                            promise && promise.setError();\n                        }\n                    }\n                };\n\n                req.send(params);\n            }\n\n            function authSuccess(accessToken, refreshToken, idToken, fulfillPromise) {\n                timeLocal = (timeLocal + new Date().getTime()) / 2;\n\n                setToken(accessToken, refreshToken, idToken, timeLocal);\n\n                if (useNonce && ((kc.tokenParsed && kc.tokenParsed.nonce != oauth.storedNonce) ||\n                    (kc.refreshTokenParsed && kc.refreshTokenParsed.nonce != oauth.storedNonce) ||\n                    (kc.idTokenParsed && kc.idTokenParsed.nonce != oauth.storedNonce))) {\n\n                    logInfo('[KEYCLOAK] Invalid nonce, clearing token');\n                    kc.clearToken();\n                    promise && promise.setError();\n                } else {\n                    if (fulfillPromise) {\n                        kc.onAuthSuccess && kc.onAuthSuccess();\n                        promise && promise.setSuccess();\n                    }\n                }\n            }\n\n        }\n\n        function loadConfig(url) {\n            var promise = createPromise(true);\n            var configUrl;\n\n            if (!config) {\n                configUrl = 'keycloak.json';\n            } else if (typeof config === 'string') {\n                configUrl = config;\n            }\n\n            function setupOidcEndoints(oidcConfiguration) {\n                if (! oidcConfiguration) {\n                    kc.endpoints = {\n                        authorize: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/auth';\n                        },\n                        token: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/token';\n                        },\n                        logout: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/logout';\n                        },\n                        checkSessionIframe: function() {\n                            var src = getRealmUrl() + '/protocol/openid-connect/login-status-iframe.html';\n                            if (kc.iframeVersion) {\n                              src = src + '?version=' + kc.iframeVersion;\n                            }\n                            return src;\n                        },\n                        register: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/registrations';\n                        },\n                        userinfo: function() {\n                            return getRealmUrl() + '/protocol/openid-connect/userinfo';\n                        }\n                    };\n                } else {\n                    kc.endpoints = {\n                        authorize: function() {\n                            return oidcConfiguration.authorization_endpoint;\n                        },\n                        token: function() {\n                            return oidcConfiguration.token_endpoint;\n                        },\n                        logout: function() {\n                            if (!oidcConfiguration.end_session_endpoint) {\n                                throw \"Not supported by the OIDC server\";\n                            }\n                            return oidcConfiguration.end_session_endpoint;\n                        },\n                        checkSessionIframe: function() {\n                            if (!oidcConfiguration.check_session_iframe) {\n                                throw \"Not supported by the OIDC server\";\n                            }\n                            return oidcConfiguration.check_session_iframe;\n                        },\n                        register: function() {\n                            throw 'Redirection to \"Register user\" page not supported in standard OIDC mode';\n                        },\n                        userinfo: function() {\n                            if (!oidcConfiguration.userinfo_endpoint) {\n                                throw \"Not supported by the OIDC server\";\n                            }\n                            return oidcConfiguration.userinfo_endpoint;\n                        }\n                    }\n                }\n            }\n\n            if (configUrl) {\n                var req = new XMLHttpRequest();\n                req.open('GET', configUrl, true);\n                req.setRequestHeader('Accept', 'application/json');\n\n                req.onreadystatechange = function () {\n                    if (req.readyState == 4) {\n                        if (req.status == 200 || fileLoaded(req)) {\n                            var config = JSON.parse(req.responseText);\n\n                            kc.authServerUrl = config['auth-server-url'];\n                            kc.realm = config['realm'];\n                            kc.clientId = config['resource'];\n                            setupOidcEndoints(null);\n                            promise.setSuccess();\n                        } else {\n                            promise.setError();\n                        }\n                    }\n                };\n\n                req.send();\n            } else {\n                if (!config.clientId) {\n                    throw 'clientId missing';\n                }\n\n                kc.clientId = config.clientId;\n\n                var oidcProvider = config['oidcProvider'];\n                if (!oidcProvider) {\n                    if (!config['url']) {\n                        var scripts = document.getElementsByTagName('script');\n                        for (var i = 0; i < scripts.length; i++) {\n                            if (scripts[i].src.match(/.*keycloak\\.js/)) {\n                                config.url = scripts[i].src.substr(0, scripts[i].src.indexOf('/js/keycloak.js'));\n                                break;\n                            }\n                        }\n                    }\n                    if (!config.realm) {\n                        throw 'realm missing';\n                    }\n\n                    kc.authServerUrl = config.url;\n                    kc.realm = config.realm;\n                    setupOidcEndoints(null);\n                    promise.setSuccess();\n                } else {\n                    if (typeof oidcProvider === 'string') {\n                        var oidcProviderConfigUrl;\n                        if (oidcProvider.charAt(oidcProvider.length - 1) == '/') {\n                            oidcProviderConfigUrl = oidcProvider + '.well-known/openid-configuration';\n                        } else {\n                            oidcProviderConfigUrl = oidcProvider + '/.well-known/openid-configuration';\n                        }\n                        var req = new XMLHttpRequest();\n                        req.open('GET', oidcProviderConfigUrl, true);\n                        req.setRequestHeader('Accept', 'application/json');\n\n                        req.onreadystatechange = function () {\n                            if (req.readyState == 4) {\n                                if (req.status == 200 || fileLoaded(req)) {\n                                    var oidcProviderConfig = JSON.parse(req.responseText);\n                                    setupOidcEndoints(oidcProviderConfig);\n                                    promise.setSuccess();\n                                } else {\n                                    promise.setError();\n                                }\n                            }\n                        };\n\n                        req.send();\n                    } else {\n                        setupOidcEndoints(oidcProvider);\n                        promise.setSuccess();\n                    }\n                }\n            }\n\n            return promise.promise;\n        }\n\n        function fileLoaded(xhr) {\n            return xhr.status == 0 && xhr.responseText && xhr.responseURL.startsWith('file:');\n        }\n\n        function setToken(token, refreshToken, idToken, timeLocal) {\n            if (kc.tokenTimeoutHandle) {\n                clearTimeout(kc.tokenTimeoutHandle);\n                kc.tokenTimeoutHandle = null;\n            }\n\n            if (refreshToken) {\n                kc.refreshToken = refreshToken;\n                kc.refreshTokenParsed = decodeToken(refreshToken);\n            } else {\n                delete kc.refreshToken;\n                delete kc.refreshTokenParsed;\n            }\n\n            if (idToken) {\n                kc.idToken = idToken;\n                kc.idTokenParsed = decodeToken(idToken);\n            } else {\n                delete kc.idToken;\n                delete kc.idTokenParsed;\n            }\n\n            if (token) {\n                kc.token = token;\n                kc.tokenParsed = decodeToken(token);\n                kc.sessionId = kc.tokenParsed.session_state;\n                kc.authenticated = true;\n                kc.subject = kc.tokenParsed.sub;\n                kc.realmAccess = kc.tokenParsed.realm_access;\n                kc.resourceAccess = kc.tokenParsed.resource_access;\n\n                if (timeLocal) {\n                    kc.timeSkew = Math.floor(timeLocal / 1000) - kc.tokenParsed.iat;\n                }\n\n                if (kc.timeSkew != null) {\n                    logInfo('[KEYCLOAK] Estimated time difference between browser and server is ' + kc.timeSkew + ' seconds');\n\n                    if (kc.onTokenExpired) {\n                        var expiresIn = (kc.tokenParsed['exp'] - (new Date().getTime() / 1000) + kc.timeSkew) * 1000;\n                        logInfo('[KEYCLOAK] Token expires in ' + Math.round(expiresIn / 1000) + ' s');\n                        if (expiresIn <= 0) {\n                            kc.onTokenExpired();\n                        } else {\n                            kc.tokenTimeoutHandle = setTimeout(kc.onTokenExpired, expiresIn);\n                        }\n                    }\n                }\n            } else {\n                delete kc.token;\n                delete kc.tokenParsed;\n                delete kc.subject;\n                delete kc.realmAccess;\n                delete kc.resourceAccess;\n\n                kc.authenticated = false;\n            }\n        }\n\n        function decodeToken(str) {\n            str = str.split('.')[1];\n\n            str = str.replace('/-/g', '+');\n            str = str.replace('/_/g', '/');\n            switch (str.length % 4)\n            {\n                case 0:\n                    break;\n                case 2:\n                    str += '==';\n                    break;\n                case 3:\n                    str += '=';\n                    break;\n                default:\n                    throw 'Invalid token';\n            }\n\n            str = (str + '===').slice(0, str.length + (str.length % 4));\n            str = str.replace(/-/g, '+').replace(/_/g, '/');\n\n            str = decodeURIComponent(escape(atob(str)));\n\n            str = JSON.parse(str);\n            return str;\n        }\n\n        function createUUID() {\n            var hexDigits = '0123456789abcdef';\n            var s = generateRandomString(36, hexDigits).split(\"\");\n            s[14] = '4';\n            s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);\n            s[8] = s[13] = s[18] = s[23] = '-';\n            var uuid = s.join('');\n            return uuid;\n        }\n\n        function parseCallback(url) {\n            var oauth = parseCallbackUrl(url);\n            if (!oauth) {\n                return;\n            }\n\n            var oauthState = callbackStorage.get(oauth.state);\n\n            if (oauthState) {\n                oauth.valid = true;\n                oauth.redirectUri = oauthState.redirectUri;\n                oauth.storedNonce = oauthState.nonce;\n                oauth.prompt = oauthState.prompt;\n                oauth.pkceCodeVerifier = oauthState.pkceCodeVerifier;\n            }\n\n            return oauth;\n        }\n\n        function parseCallbackUrl(url) {\n            var supportedParams;\n            switch (kc.flow) {\n                case 'standard':\n                    supportedParams = ['code', 'state', 'session_state'];\n                    break;\n                case 'implicit':\n                    supportedParams = ['access_token', 'token_type', 'id_token', 'state', 'session_state', 'expires_in'];\n                    break;\n                case 'hybrid':\n                    supportedParams = ['access_token', 'id_token', 'code', 'state', 'session_state'];\n                    break;\n            }\n\n            supportedParams.push('error');\n            supportedParams.push('error_description');\n            supportedParams.push('error_uri');\n\n            var queryIndex = url.indexOf('?');\n            var fragmentIndex = url.indexOf('#');\n\n            var newUrl;\n            var parsed;\n\n            if (kc.responseMode === 'query' && queryIndex !== -1) {\n                newUrl = url.substring(0, queryIndex);\n                parsed = parseCallbackParams(url.substring(queryIndex + 1, fragmentIndex !== -1 ? fragmentIndex : url.length), supportedParams);\n                if (parsed.paramsString !== '') {\n                    newUrl += '?' + parsed.paramsString;\n                }\n                if (fragmentIndex !== -1) {\n                    newUrl += url.substring(fragmentIndex);\n                }\n            } else if (kc.responseMode === 'fragment' && fragmentIndex !== -1) {\n                newUrl = url.substring(0, fragmentIndex);\n                parsed = parseCallbackParams(url.substring(fragmentIndex + 1), supportedParams);\n                if (parsed.paramsString !== '') {\n                    newUrl += '#' + parsed.paramsString;\n                }\n            }\n\n            if (parsed && parsed.oauthParams) {\n                if (kc.flow === 'standard' || kc.flow === 'hybrid') {\n                    if ((parsed.oauthParams.code || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                        parsed.oauthParams.newUrl = newUrl;\n                        return parsed.oauthParams;\n                    }\n                } else if (kc.flow === 'implicit') {\n                    if ((parsed.oauthParams.access_token || parsed.oauthParams.error) && parsed.oauthParams.state) {\n                        parsed.oauthParams.newUrl = newUrl;\n                        return parsed.oauthParams;\n                    }\n                }\n            }\n        }\n\n        function parseCallbackParams(paramsString, supportedParams) {\n            var p = paramsString.split('&');\n            var result = {\n                paramsString: '',\n                oauthParams: {}\n            }\n            for (var i = 0; i < p.length; i++) {\n                var t = p[i].split('=');\n                if (supportedParams.indexOf(t[0]) !== -1) {\n                    result.oauthParams[t[0]] = t[1];\n                } else {\n                    if (result.paramsString !== '') {\n                        result.paramsString += '&';\n                    }\n                    result.paramsString += p[i];\n                }\n            }\n            return result;\n        }\n\n        function createPromise(internal) {\n            if (!internal && kc.useNativePromise) {\n                return createNativePromise();\n            } else {\n                return createLegacyPromise();\n            }\n        }\n\n        function createNativePromise() {\n            // Need to create a native Promise which also preserves the\n            // interface of the custom promise type previously used by the API\n            var p = {\n                setSuccess: function(result) {\n                    p.resolve(result);\n                },\n\n                setError: function(result) {\n                    p.reject(result);\n                }\n            };\n            p.promise = new Promise(function(resolve, reject) {\n                p.resolve = resolve;\n                p.reject = reject;\n            });\n            return p;\n        }\n\n        function createLegacyPromise() {\n            var p = {\n                setSuccess: function(result) {\n                    p.success = true;\n                    p.result = result;\n                    if (p.successCallback) {\n                        p.successCallback(result);\n                    }\n                },\n\n                setError: function(result) {\n                    p.error = true;\n                    p.result = result;\n                    if (p.errorCallback) {\n                        p.errorCallback(result);\n                    }\n                },\n\n                promise: {\n                    success: function(callback) {\n                        if (p.success) {\n                            callback(p.result);\n                        } else if (!p.error) {\n                            p.successCallback = callback;\n                        }\n                        return p.promise;\n                    },\n                    error: function(callback) {\n                        if (p.error) {\n                            callback(p.result);\n                        } else if (!p.success) {\n                            p.errorCallback = callback;\n                        }\n                        return p.promise;\n                    }\n                }\n            }\n            return p;\n        }\n\n        function setupCheckLoginIframe() {\n            var promise = createPromise(true);\n\n            if (!loginIframe.enable) {\n                promise.setSuccess();\n                return promise.promise;\n            }\n\n            if (loginIframe.iframe) {\n                promise.setSuccess();\n                return promise.promise;\n            }\n\n            var iframe = document.createElement('iframe');\n            loginIframe.iframe = iframe;\n\n            iframe.onload = function() {\n                var authUrl = kc.endpoints.authorize();\n                if (authUrl.charAt(0) === '/') {\n                    loginIframe.iframeOrigin = getOrigin();\n                } else {\n                    loginIframe.iframeOrigin = authUrl.substring(0, authUrl.indexOf('/', 8));\n                }\n                promise.setSuccess();\n            }\n\n            var src = kc.endpoints.checkSessionIframe();\n            iframe.setAttribute('src', src );\n            iframe.setAttribute('title', 'keycloak-session-iframe' );\n            iframe.style.display = 'none';\n            document.body.appendChild(iframe);\n\n            var messageCallback = function(event) {\n                if ((event.origin !== loginIframe.iframeOrigin) || (loginIframe.iframe.contentWindow !== event.source)) {\n                    return;\n                }\n\n                if (!(event.data == 'unchanged' || event.data == 'changed' || event.data == 'error')) {\n                    return;\n                }\n\n\n                if (event.data != 'unchanged') {\n                    kc.clearToken();\n                }\n\n                var callbacks = loginIframe.callbackList.splice(0, loginIframe.callbackList.length);\n\n                for (var i = callbacks.length - 1; i >= 0; --i) {\n                    var promise = callbacks[i];\n                    if (event.data == 'error') {\n                        promise.setError();\n                    } else {\n                        promise.setSuccess(event.data == 'unchanged');\n                    }\n                }\n            };\n\n            window.addEventListener('message', messageCallback, false);\n\n            return promise.promise;\n        }\n\n        function scheduleCheckIframe() {\n            if (loginIframe.enable) {\n                if (kc.token) {\n                    setTimeout(function() {\n                        checkLoginIframe().success(function(unchanged) {\n                            if (unchanged) {\n                                scheduleCheckIframe();\n                            }\n                        });\n                    }, loginIframe.interval * 1000);\n                }\n            }\n        }\n\n        function checkLoginIframe() {\n            var promise = createPromise(true);\n\n            if (loginIframe.iframe && loginIframe.iframeOrigin ) {\n                var msg = kc.clientId + ' ' + (kc.sessionId ? kc.sessionId : '');\n                loginIframe.callbackList.push(promise);\n                var origin = loginIframe.iframeOrigin;\n                if (loginIframe.callbackList.length == 1) {\n                    loginIframe.iframe.contentWindow.postMessage(msg, origin);\n                }\n            } else {\n                promise.setSuccess();\n            }\n\n            return promise.promise;\n        }\n\n        function loadAdapter(type) {\n            if (!type || type == 'default') {\n                return {\n                    login: function(options) {\n                        window.location.replace(kc.createLoginUrl(options));\n                        return createPromise(false).promise;\n                    },\n\n                    logout: function(options) {\n                        window.location.replace(kc.createLogoutUrl(options));\n                        return createPromise(false).promise;\n                    },\n\n                    register: function(options) {\n                        window.location.replace(kc.createRegisterUrl(options));\n                        return createPromise(false).promise;\n                    },\n\n                    accountManagement : function() {\n                        var accountUrl = kc.createAccountUrl();\n                        if (typeof accountUrl !== 'undefined') {\n                            window.location.href = accountUrl;\n                        } else {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                        return createPromise(false).promise;\n                    },\n\n                    redirectUri: function(options, encodeHash) {\n                        if (arguments.length == 1) {\n                            encodeHash = true;\n                        }\n\n                        if (options && options.redirectUri) {\n                            return options.redirectUri;\n                        } else if (kc.redirectUri) {\n                            return kc.redirectUri;\n                        } else {\n                            return location.href;\n                        }\n                    }\n                };\n            }\n\n            if (type == 'cordova') {\n                loginIframe.enable = false;\n                var cordovaOpenWindowWrapper = function(loginUrl, target, options) {\n                    if (window.cordova && window.cordova.InAppBrowser) {\n                        // Use inappbrowser for IOS and Android if available\n                        return window.cordova.InAppBrowser.open(loginUrl, target, options);\n                    } else {\n                        return window.open(loginUrl, target, options);\n                    }\n                };\n\n                var shallowCloneCordovaOptions = function (userOptions) {\n                    if (userOptions && userOptions.cordovaOptions) {\n                        return Object.keys(userOptions.cordovaOptions).reduce(function (options, optionName) {\n                            options[optionName] = userOptions.cordovaOptions[optionName];\n                            return options;\n                        }, {});\n                    } else {\n                        return {};\n                    }\n                };\n\n                var formatCordovaOptions = function (cordovaOptions) {\n                    return Object.keys(cordovaOptions).reduce(function (options, optionName) {\n                        options.push(optionName+\"=\"+cordovaOptions[optionName]);\n                        return options;\n                    }, []).join(\",\");\n                };\n\n                var createCordovaOptions = function (userOptions) {\n                    var cordovaOptions = shallowCloneCordovaOptions(userOptions);\n                    cordovaOptions.location = 'no';\n                    if (userOptions && userOptions.prompt == 'none') {\n                        cordovaOptions.hidden = 'yes';\n                    }\n                    return formatCordovaOptions(cordovaOptions);\n                };\n\n                return {\n                    login: function(options) {\n                        var promise = createPromise(false);\n\n                        var cordovaOptions = createCordovaOptions(options);\n                        var loginUrl = kc.createLoginUrl(options);\n                        var ref = cordovaOpenWindowWrapper(loginUrl, '_blank', cordovaOptions);\n                        var completed = false;\n\n                        var closed = false;\n                        var closeBrowser = function() {\n                            closed = true;\n                            ref.close();\n                        };\n\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                var callback = parseCallback(event.url);\n                                processCallback(callback, promise);\n                                closeBrowser();\n                                completed = true;\n                            }\n                        });\n\n                        ref.addEventListener('loaderror', function(event) {\n                            if (!completed) {\n                                if (event.url.indexOf('http://localhost') == 0) {\n                                    var callback = parseCallback(event.url);\n                                    processCallback(callback, promise);\n                                    closeBrowser();\n                                    completed = true;\n                                } else {\n                                    promise.setError();\n                                    closeBrowser();\n                                }\n                            }\n                        });\n\n                        ref.addEventListener('exit', function(event) {\n                            if (!closed) {\n                                promise.setError({\n                                    reason: \"closed_by_user\"\n                                });\n                            }\n                        });\n\n                        return promise.promise;\n                    },\n\n                    logout: function(options) {\n                        var promise = createPromise(false);\n\n                        var logoutUrl = kc.createLogoutUrl(options);\n                        var ref = cordovaOpenWindowWrapper(logoutUrl, '_blank', 'location=no,hidden=yes');\n\n                        var error;\n\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                ref.close();\n                            }\n                        });\n\n                        ref.addEventListener('loaderror', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                ref.close();\n                            } else {\n                                error = true;\n                                ref.close();\n                            }\n                        });\n\n                        ref.addEventListener('exit', function(event) {\n                            if (error) {\n                                promise.setError();\n                            } else {\n                                kc.clearToken();\n                                promise.setSuccess();\n                            }\n                        });\n\n                        return promise.promise;\n                    },\n\n                    register : function(options) {\n                        var promise = createPromise(false);\n                        var registerUrl = kc.createRegisterUrl();\n                        var cordovaOptions = createCordovaOptions(options);\n                        var ref = cordovaOpenWindowWrapper(registerUrl, '_blank', cordovaOptions);\n                        ref.addEventListener('loadstart', function(event) {\n                            if (event.url.indexOf('http://localhost') == 0) {\n                                ref.close();\n                                var oauth = parseCallback(event.url);\n                                processCallback(oauth, promise);\n                            }\n                        });\n                        return promise.promise;\n                    },\n\n                    accountManagement : function() {\n                        var accountUrl = kc.createAccountUrl();\n                        if (typeof accountUrl !== 'undefined') {\n                            var ref = cordovaOpenWindowWrapper(accountUrl, '_blank', 'location=no');\n                            ref.addEventListener('loadstart', function(event) {\n                                if (event.url.indexOf('http://localhost') == 0) {\n                                    ref.close();\n                                }\n                            });\n                        } else {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                    },\n\n                    redirectUri: function(options) {\n                        return 'http://localhost';\n                    }\n                }\n            }\n\n            if (type == 'cordova-native') {\n                loginIframe.enable = false;\n\n                return {\n                    login: function(options) {\n                        var promise = createPromise(false);\n                        var loginUrl = kc.createLoginUrl(options);\n\n                        universalLinks.subscribe('keycloak', function(event) {\n                            universalLinks.unsubscribe('keycloak');\n                            window.cordova.plugins.browsertab.close();\n                            var oauth = parseCallback(event.url);\n                            processCallback(oauth, promise);\n                        });\n\n                        window.cordova.plugins.browsertab.openUrl(loginUrl);\n                        return promise.promise;\n                    },\n\n                    logout: function(options) {\n                        var promise = createPromise(false);\n                        var logoutUrl = kc.createLogoutUrl(options);\n\n                        universalLinks.subscribe('keycloak', function(event) {\n                            universalLinks.unsubscribe('keycloak');\n                            window.cordova.plugins.browsertab.close();\n                            kc.clearToken();\n                            promise.setSuccess();\n                        });\n\n                        window.cordova.plugins.browsertab.openUrl(logoutUrl);\n                        return promise.promise;\n                    },\n\n                    register : function(options) {\n                        var promise = createPromise(false);\n                        var registerUrl = kc.createRegisterUrl(options);\n                        universalLinks.subscribe('keycloak' , function(event) {\n                            universalLinks.unsubscribe('keycloak');\n                            window.cordova.plugins.browsertab.close();\n                            var oauth = parseCallback(event.url);\n                            processCallback(oauth, promise);\n                        });\n                        window.cordova.plugins.browsertab.openUrl(registerUrl);\n                        return promise.promise;\n\n                    },\n\n                    accountManagement : function() {\n                        var accountUrl = kc.createAccountUrl();\n                        if (typeof accountUrl !== 'undefined') {\n                            window.cordova.plugins.browsertab.openUrl(accountUrl);\n                        } else {\n                            throw \"Not supported by the OIDC server\";\n                        }\n                    },\n\n                    redirectUri: function(options) {\n                        if (options && options.redirectUri) {\n                            return options.redirectUri;\n                        } else if (kc.redirectUri) {\n                            return kc.redirectUri;\n                        } else {\n                            return \"http://localhost\";\n                        }\n                    }\n                }\n            }\n\n            throw 'invalid adapter type: ' + type;\n        }\n\n        var LocalStorage = function() {\n            if (!(this instanceof LocalStorage)) {\n                return new LocalStorage();\n            }\n\n            localStorage.setItem('kc-test', 'test');\n            localStorage.removeItem('kc-test');\n\n            var cs = this;\n\n            function clearExpired() {\n                var time = new Date().getTime();\n                for (var i = 0; i < localStorage.length; i++)  {\n                    var key = localStorage.key(i);\n                    if (key && key.indexOf('kc-callback-') == 0) {\n                        var value = localStorage.getItem(key);\n                        if (value) {\n                            try {\n                                var expires = JSON.parse(value).expires;\n                                if (!expires || expires < time) {\n                                    localStorage.removeItem(key);\n                                }\n                            } catch (err) {\n                                localStorage.removeItem(key);\n                            }\n                        }\n                    }\n                }\n            }\n\n            cs.get = function(state) {\n                if (!state) {\n                    return;\n                }\n\n                var key = 'kc-callback-' + state;\n                var value = localStorage.getItem(key);\n                if (value) {\n                    localStorage.removeItem(key);\n                    value = JSON.parse(value);\n                }\n\n                clearExpired();\n                return value;\n            };\n\n            cs.add = function(state) {\n                clearExpired();\n\n                var key = 'kc-callback-' + state.state;\n                state.expires = new Date().getTime() + (60 * 60 * 1000);\n                localStorage.setItem(key, JSON.stringify(state));\n            };\n        };\n\n        var CookieStorage = function() {\n            if (!(this instanceof CookieStorage)) {\n                return new CookieStorage();\n            }\n\n            var cs = this;\n\n            cs.get = function(state) {\n                if (!state) {\n                    return;\n                }\n\n                var value = getCookie('kc-callback-' + state);\n                setCookie('kc-callback-' + state, '', cookieExpiration(-100));\n                if (value) {\n                    return JSON.parse(value);\n                }\n            };\n\n            cs.add = function(state) {\n                setCookie('kc-callback-' + state.state, JSON.stringify(state), cookieExpiration(60));\n            };\n\n            cs.removeItem = function(key) {\n                setCookie(key, '', cookieExpiration(-100));\n            };\n\n            var cookieExpiration = function (minutes) {\n                var exp = new Date();\n                exp.setTime(exp.getTime() + (minutes*60*1000));\n                return exp;\n            };\n\n            var getCookie = function (key) {\n                var name = key + '=';\n                var ca = document.cookie.split(';');\n                for (var i = 0; i < ca.length; i++) {\n                    var c = ca[i];\n                    while (c.charAt(0) == ' ') {\n                        c = c.substring(1);\n                    }\n                    if (c.indexOf(name) == 0) {\n                        return c.substring(name.length, c.length);\n                    }\n                }\n                return '';\n            };\n\n            var setCookie = function (key, value, expirationDate) {\n                var cookie = key + '=' + value + '; '\n                    + 'expires=' + expirationDate.toUTCString() + '; ';\n                document.cookie = cookie;\n            }\n        };\n\n        function createCallbackStorage() {\n            try {\n                return new LocalStorage();\n            } catch (err) {\n            }\n\n            return new CookieStorage();\n        }\n\n        function createLogger(fn) {\n            return function() {\n                if (kc.enableLogging) {\n                    fn.apply(console, Array.prototype.slice.call(arguments));\n                }\n            };\n        }\n    }\n\n    return Keycloak;\n})\n"]},"metadata":{},"sourceType":"script"}